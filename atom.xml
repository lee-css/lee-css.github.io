<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
    <id>https://leecss.com</id>
    <title>当下</title>
    <updated>2021-07-27T23:11:23.265Z</updated>
    <generator>https://github.com/jpmonette/feed</generator>
    <link rel="alternate" href="https://leecss.com"/>
    <link rel="self" href="https://leecss.com/atom.xml"/>
    <logo>https://leecss.com/images/avatar.png</logo>
    <icon>https://leecss.com/favicon.ico</icon>
    <rights>All rights reserved 2021, 当下</rights>
    <entry>
        <title type="html"><![CDATA[http-缓存验证]]></title>
        <id>https://leecss.com/post/http-huan-cun-yan-zheng/</id>
        <link href="https://leecss.com/post/http-huan-cun-yan-zheng/">
        </link>
        <updated>2021-07-23T00:31:09.000Z</updated>
        <content type="html"><![CDATA[<h2 id="概述">概述</h2>
<p>当我们给Catch-Control 设置了 no-catch 后，每次浏览器对这个资源的请求时，都会到服务器端进行资源验证，验证完之后，如果确定这个资源可以使用缓存，浏览器才会读取本地的缓存。</p>
<h2 id="缓存验证流程">缓存验证流程</h2>
<figure data-type="image" tabindex="1"><img src="https://leecss.com/post-images/1627000310327.jpg" alt="" loading="lazy"></figure>
<h2 id="方式">方式</h2>
<p>验证资源是否需要更新有两种方式： Last-Modified 与 Etag</p>
<h3 id="last-modified">Last-Modified</h3>
<p>上次修改时间。主要配合If-Modified-Since 或者 If-Unmodified-Since 这两个Header 使用。</p>
<p>通过对比请求首部字段If-Modified-Since和实体首部字段 Last-Modified，来判断是否使用缓存。</p>
<p>如果我们请求的一个资源，它返回的Header 中有Last-Modified 并指定了一个时间。那么下次浏览器再发送这个请求的时候就会带上这个时间，并把它放在 If-Modified-Since中；服务器就可以根据If-Modified-Since值对比资源上次修改的时间，如果两个时间一致，说明请求的资源都没有过更新，那么就可以使用缓存</p>
<h3 id="etag">Etag</h3>
<p>是一个更为严格的验证，通过数据签名的方式验证。主要配合 If-Match 或者 If-None-Match 使用。</p>
<p>它根据数据内容产生一个唯一的编码（数据不同，编码结果不同）。最典型的做法，是我们对数据内容做一个哈希计算。</p>
<p>当服务端加上<code>Last-Modified</code>,<code>Etag</code>，浏览器下次请求就会带上<code>If-Modified-Since</code>和<code>If-None-Match</code>,来进行缓存验证。</p>
<p><strong>使用缓存实例</strong></p>
<p>test.html</p>
<pre><code class="language-html">&lt;!DOCTYPE html&gt;
&lt;html lang=&quot;en&quot;&gt;
&lt;head&gt;
  &lt;meta charset=&quot;UTF-8&quot;&gt;
  &lt;meta name=&quot;viewport&quot; content=&quot;width=device-width, initial-scale=1.0&quot;&gt;
  &lt;meta http-equiv=&quot;X-UA-Compatible&quot; content=&quot;ie=edge&quot;&gt;
  &lt;title&gt;Document&lt;/title&gt;
&lt;/head&gt;
&lt;body&gt;
    
&lt;/body&gt;
&lt;script src=&quot;/script.js&quot;&gt;&lt;/script&gt;
&lt;/html&gt;
</code></pre>
<p>server.js</p>
<pre><code class="language-js">const http = require('http')
const fs = require('fs')

http.createServer(function (request, response) {
  console.log('request come', request.url)

  if (request.url === '/') {
    const html = fs.readFileSync('test.html', 'utf8')
    response.writeHead(200, {
      'Content-Type': 'text/html'
    })
    response.end(html)
  }

  if (request.url === '/script.js') {
    
    const etag = request.headers['if-none-match']
    if (etag === '777') {
      response.writeHead(304, {
        'Content-Type': 'text/javascript',
        'Cache-Control': 'max-age=2000000, no-cache',
        'Last-Modified': '123',
        'Etag': '777'
      })
      response.end()
    } else {
      response.writeHead(200, {
        'Content-Type': 'text/javascript',
        'Cache-Control': 'max-age=2000000, no-cache',
        'Last-Modified': '123',
        'Etag': '777'
      })
      response.end('console.log(&quot;script loaded twice&quot;)')
    }
  }
}).listen(8888)

console.log('server listening on 8888')
</code></pre>
<p>使用<code>node server.js</code>启动，在<code>http://localhost:8888/</code>上查看server.js的网络请求。</p>
<p>可以发现，状态码第一次是200，第二次及以后缓存范围期限内，都是304</p>
]]></content>
    </entry>
    <entry>
        <title type="html"><![CDATA[chrome-开发者工具]]></title>
        <id>https://leecss.com/post/chrome-kai-fa-zhe-gong-ju/</id>
        <link href="https://leecss.com/post/chrome-kai-fa-zhe-gong-ju/">
        </link>
        <updated>2021-07-22T23:46:53.000Z</updated>
        <content type="html"><![CDATA[<h2 id="概述">概述</h2>
<p>开发调试工具</p>
<h2 id="功能">功能</h2>
<h3 id="network">Network</h3>
<p>1、Disable cache</p>
<p>当勾选了Disable cache，浏览器发送http请求就不会再发送缓存相关的请求头，比如If-Modified-Since、If-None-Match等，即不再使用缓存。</p>
]]></content>
    </entry>
    <entry>
        <title type="html"><![CDATA[http-实体首部字段Content-Type]]></title>
        <id>https://leecss.com/post/http-shi-ti-shou-bu-zi-duan-content-type/</id>
        <link href="https://leecss.com/post/http-shi-ti-shou-bu-zi-duan-content-type/">
        </link>
        <updated>2021-07-22T22:07:15.000Z</updated>
        <content type="html"><![CDATA[<h2 id="概述">概述</h2>
<p>Content-Type（内容类型），一般是指网页中存在的 Content-Type，用于定义网络文件的类型和网页的编码，决定浏览器将以什么形式、什么编码读取这个文件，这就是经常看到一些 PHP 网页点击的结果却是下载一个文件或一张图片的原因。</p>
<p>Content-Type 标头告诉客户端实际返回的内容的内容类型。</p>
<p>语法格式：</p>
<pre><code class="language-http">Content-Type: text/html; charset=utf-8
Content-Type: multipart/form-data; boundary=something
</code></pre>
<h2 id="常见媒体类型">常见媒体类型</h2>
<ul>
<li>text/html ： HTML格式</li>
<li>text/plain ：纯文本格式</li>
<li>text/xml ： XML格式</li>
<li>image/gif ：gif图片格式</li>
<li>image/jpeg ：jpg图片格式</li>
<li>image/png：png图片格式</li>
</ul>
<p>以application开头的媒体格式类型：</p>
<ul>
<li>application/xhtml+xml ：XHTML格式</li>
<li>application/xml： XML数据格式</li>
<li>application/atom+xml ：Atom XML聚合格式</li>
<li>application/json： JSON数据格式</li>
<li>application/pdf：pdf格式</li>
<li>application/msword ： Word文档格式</li>
<li>application/octet-stream ： 二进制流数据（如常见的文件下载）</li>
<li>application/x-www-form-urlencoded ： <code>&lt;form encType=&quot;&quot;&gt;</code>中默认的encType，form表单数据被编码为key/value格式发送到服务器（表单默认的提交数据的格式）</li>
</ul>
<p>另外一种常见的媒体格式是上传文件之时使用的：</p>
<ul>
<li>multipart/form-data ： 需要在表单中进行文件上传时，就需要使用该格式</li>
</ul>
<h2 id="http-content-type-对照表">HTTP content-type 对照表</h2>
<table>
<thead>
<tr>
<th style="text-align:left">文件扩展名</th>
<th style="text-align:left">Content-Type(Mime-Type)</th>
<th style="text-align:left">文件扩展名</th>
<th style="text-align:left">Content-Type(Mime-Type)</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left">.*（ 二进制流，不知道下载文件类型）</td>
<td style="text-align:left">application/octet-stream</td>
<td style="text-align:left">.tif</td>
<td style="text-align:left">image/tiff</td>
</tr>
<tr>
<td style="text-align:left">.001</td>
<td style="text-align:left">application/x-001</td>
<td style="text-align:left">.301</td>
<td style="text-align:left">application/x-301</td>
</tr>
<tr>
<td style="text-align:left">.323</td>
<td style="text-align:left">text/h323</td>
<td style="text-align:left">.906</td>
<td style="text-align:left">application/x-906</td>
</tr>
<tr>
<td style="text-align:left">.907</td>
<td style="text-align:left">drawing/907</td>
<td style="text-align:left">.a11</td>
<td style="text-align:left">application/x-a11</td>
</tr>
<tr>
<td style="text-align:left">.acp</td>
<td style="text-align:left">audio/x-mei-aac</td>
<td style="text-align:left">.ai</td>
<td style="text-align:left">application/postscript</td>
</tr>
<tr>
<td style="text-align:left">.aif</td>
<td style="text-align:left">audio/aiff</td>
<td style="text-align:left">.aifc</td>
<td style="text-align:left">audio/aiff</td>
</tr>
<tr>
<td style="text-align:left">.aiff</td>
<td style="text-align:left">audio/aiff</td>
<td style="text-align:left">.anv</td>
<td style="text-align:left">application/x-anv</td>
</tr>
<tr>
<td style="text-align:left">.asa</td>
<td style="text-align:left">text/asa</td>
<td style="text-align:left">.asf</td>
<td style="text-align:left">video/x-ms-asf</td>
</tr>
<tr>
<td style="text-align:left">.asp</td>
<td style="text-align:left">text/asp</td>
<td style="text-align:left">.asx</td>
<td style="text-align:left">video/x-ms-asf</td>
</tr>
<tr>
<td style="text-align:left">.au</td>
<td style="text-align:left">audio/basic</td>
<td style="text-align:left">.avi</td>
<td style="text-align:left">video/avi</td>
</tr>
<tr>
<td style="text-align:left">.awf</td>
<td style="text-align:left">application/vnd.adobe.workflow</td>
<td style="text-align:left">.biz</td>
<td style="text-align:left">text/xml</td>
</tr>
<tr>
<td style="text-align:left">.bmp</td>
<td style="text-align:left">application/x-bmp</td>
<td style="text-align:left">.bot</td>
<td style="text-align:left">application/x-bot</td>
</tr>
<tr>
<td style="text-align:left">.c4t</td>
<td style="text-align:left">application/x-c4t</td>
<td style="text-align:left">.c90</td>
<td style="text-align:left">application/x-c90</td>
</tr>
<tr>
<td style="text-align:left">.cal</td>
<td style="text-align:left">application/x-cals</td>
<td style="text-align:left">.cat</td>
<td style="text-align:left">application/vnd.ms-pki.seccat</td>
</tr>
<tr>
<td style="text-align:left">.cdf</td>
<td style="text-align:left">application/x-netcdf</td>
<td style="text-align:left">.cdr</td>
<td style="text-align:left">application/x-cdr</td>
</tr>
<tr>
<td style="text-align:left">.cel</td>
<td style="text-align:left">application/x-cel</td>
<td style="text-align:left">.cer</td>
<td style="text-align:left">application/x-x509-ca-cert</td>
</tr>
<tr>
<td style="text-align:left">.cg4</td>
<td style="text-align:left">application/x-g4</td>
<td style="text-align:left">.cgm</td>
<td style="text-align:left">application/x-cgm</td>
</tr>
<tr>
<td style="text-align:left">.cit</td>
<td style="text-align:left">application/x-cit</td>
<td style="text-align:left">.class</td>
<td style="text-align:left">java/*</td>
</tr>
<tr>
<td style="text-align:left">.cml</td>
<td style="text-align:left">text/xml</td>
<td style="text-align:left">.cmp</td>
<td style="text-align:left">application/x-cmp</td>
</tr>
<tr>
<td style="text-align:left">.cmx</td>
<td style="text-align:left">application/x-cmx</td>
<td style="text-align:left">.cot</td>
<td style="text-align:left">application/x-cot</td>
</tr>
<tr>
<td style="text-align:left">.crl</td>
<td style="text-align:left">application/pkix-crl</td>
<td style="text-align:left">.crt</td>
<td style="text-align:left">application/x-x509-ca-cert</td>
</tr>
<tr>
<td style="text-align:left">.csi</td>
<td style="text-align:left">application/x-csi</td>
<td style="text-align:left">.css</td>
<td style="text-align:left">text/css</td>
</tr>
<tr>
<td style="text-align:left">.cut</td>
<td style="text-align:left">application/x-cut</td>
<td style="text-align:left">.dbf</td>
<td style="text-align:left">application/x-dbf</td>
</tr>
<tr>
<td style="text-align:left">.dbm</td>
<td style="text-align:left">application/x-dbm</td>
<td style="text-align:left">.dbx</td>
<td style="text-align:left">application/x-dbx</td>
</tr>
<tr>
<td style="text-align:left">.dcd</td>
<td style="text-align:left">text/xml</td>
<td style="text-align:left">.dcx</td>
<td style="text-align:left">application/x-dcx</td>
</tr>
<tr>
<td style="text-align:left">.der</td>
<td style="text-align:left">application/x-x509-ca-cert</td>
<td style="text-align:left">.dgn</td>
<td style="text-align:left">application/x-dgn</td>
</tr>
<tr>
<td style="text-align:left">.dib</td>
<td style="text-align:left">application/x-dib</td>
<td style="text-align:left">.dll</td>
<td style="text-align:left">application/x-msdownload</td>
</tr>
<tr>
<td style="text-align:left">.doc</td>
<td style="text-align:left">application/msword</td>
<td style="text-align:left">.dot</td>
<td style="text-align:left">application/msword</td>
</tr>
<tr>
<td style="text-align:left">.drw</td>
<td style="text-align:left">application/x-drw</td>
<td style="text-align:left">.dtd</td>
<td style="text-align:left">text/xml</td>
</tr>
<tr>
<td style="text-align:left">.dwf</td>
<td style="text-align:left">Model/vnd.dwf</td>
<td style="text-align:left">.dwf</td>
<td style="text-align:left">application/x-dwf</td>
</tr>
<tr>
<td style="text-align:left">.dwg</td>
<td style="text-align:left">application/x-dwg</td>
<td style="text-align:left">.dxb</td>
<td style="text-align:left">application/x-dxb</td>
</tr>
<tr>
<td style="text-align:left">.dxf</td>
<td style="text-align:left">application/x-dxf</td>
<td style="text-align:left">.edn</td>
<td style="text-align:left">application/vnd.adobe.edn</td>
</tr>
<tr>
<td style="text-align:left">.emf</td>
<td style="text-align:left">application/x-emf</td>
<td style="text-align:left">.eml</td>
<td style="text-align:left">message/rfc822</td>
</tr>
<tr>
<td style="text-align:left">.ent</td>
<td style="text-align:left">text/xml</td>
<td style="text-align:left">.epi</td>
<td style="text-align:left">application/x-epi</td>
</tr>
<tr>
<td style="text-align:left">.eps</td>
<td style="text-align:left">application/x-ps</td>
<td style="text-align:left">.eps</td>
<td style="text-align:left">application/postscript</td>
</tr>
<tr>
<td style="text-align:left">.etd</td>
<td style="text-align:left">application/x-ebx</td>
<td style="text-align:left">.exe</td>
<td style="text-align:left">application/x-msdownload</td>
</tr>
<tr>
<td style="text-align:left">.fax</td>
<td style="text-align:left">image/fax</td>
<td style="text-align:left">.fdf</td>
<td style="text-align:left">application/vnd.fdf</td>
</tr>
<tr>
<td style="text-align:left">.fif</td>
<td style="text-align:left">application/fractals</td>
<td style="text-align:left">.fo</td>
<td style="text-align:left">text/xml</td>
</tr>
<tr>
<td style="text-align:left">.frm</td>
<td style="text-align:left">application/x-frm</td>
<td style="text-align:left">.g4</td>
<td style="text-align:left">application/x-g4</td>
</tr>
<tr>
<td style="text-align:left">.gbr</td>
<td style="text-align:left">application/x-gbr</td>
<td style="text-align:left">.</td>
<td style="text-align:left">application/x-</td>
</tr>
<tr>
<td style="text-align:left">.gif</td>
<td style="text-align:left">image/gif</td>
<td style="text-align:left">.gl2</td>
<td style="text-align:left">application/x-gl2</td>
</tr>
<tr>
<td style="text-align:left">.gp4</td>
<td style="text-align:left">application/x-gp4</td>
<td style="text-align:left">.hgl</td>
<td style="text-align:left">application/x-hgl</td>
</tr>
<tr>
<td style="text-align:left">.hmr</td>
<td style="text-align:left">application/x-hmr</td>
<td style="text-align:left">.hpg</td>
<td style="text-align:left">application/x-hpgl</td>
</tr>
<tr>
<td style="text-align:left">.hpl</td>
<td style="text-align:left">application/x-hpl</td>
<td style="text-align:left">.hqx</td>
<td style="text-align:left">application/mac-binhex40</td>
</tr>
<tr>
<td style="text-align:left">.hrf</td>
<td style="text-align:left">application/x-hrf</td>
<td style="text-align:left">.hta</td>
<td style="text-align:left">application/hta</td>
</tr>
<tr>
<td style="text-align:left">.htc</td>
<td style="text-align:left">text/x-component</td>
<td style="text-align:left">.htm</td>
<td style="text-align:left">text/html</td>
</tr>
<tr>
<td style="text-align:left">.html</td>
<td style="text-align:left">text/html</td>
<td style="text-align:left">.htt</td>
<td style="text-align:left">text/webviewhtml</td>
</tr>
<tr>
<td style="text-align:left">.htx</td>
<td style="text-align:left">text/html</td>
<td style="text-align:left">.icb</td>
<td style="text-align:left">application/x-icb</td>
</tr>
<tr>
<td style="text-align:left">.ico</td>
<td style="text-align:left">image/x-icon</td>
<td style="text-align:left">.ico</td>
<td style="text-align:left">application/x-ico</td>
</tr>
<tr>
<td style="text-align:left">.iff</td>
<td style="text-align:left">application/x-iff</td>
<td style="text-align:left">.ig4</td>
<td style="text-align:left">application/x-g4</td>
</tr>
<tr>
<td style="text-align:left">.igs</td>
<td style="text-align:left">application/x-igs</td>
<td style="text-align:left">.iii</td>
<td style="text-align:left">application/x-iphone</td>
</tr>
<tr>
<td style="text-align:left">.img</td>
<td style="text-align:left">application/x-img</td>
<td style="text-align:left">.ins</td>
<td style="text-align:left">application/x-internet-signup</td>
</tr>
<tr>
<td style="text-align:left">.isp</td>
<td style="text-align:left">application/x-internet-signup</td>
<td style="text-align:left">.IVF</td>
<td style="text-align:left">video/x-ivf</td>
</tr>
<tr>
<td style="text-align:left">.java</td>
<td style="text-align:left">java/*</td>
<td style="text-align:left">.jfif</td>
<td style="text-align:left">image/jpeg</td>
</tr>
<tr>
<td style="text-align:left">.jpe</td>
<td style="text-align:left">image/jpeg</td>
<td style="text-align:left">.jpe</td>
<td style="text-align:left">application/x-jpe</td>
</tr>
<tr>
<td style="text-align:left">.jpeg</td>
<td style="text-align:left">image/jpeg</td>
<td style="text-align:left">.jpg</td>
<td style="text-align:left">image/jpeg</td>
</tr>
<tr>
<td style="text-align:left">.jpg</td>
<td style="text-align:left">application/x-jpg</td>
<td style="text-align:left">.js</td>
<td style="text-align:left">application/x-javascript</td>
</tr>
<tr>
<td style="text-align:left">.jsp</td>
<td style="text-align:left">text/html</td>
<td style="text-align:left">.la1</td>
<td style="text-align:left">audio/x-liquid-file</td>
</tr>
<tr>
<td style="text-align:left">.lar</td>
<td style="text-align:left">application/x-laplayer-reg</td>
<td style="text-align:left">.latex</td>
<td style="text-align:left">application/x-latex</td>
</tr>
<tr>
<td style="text-align:left">.lavs</td>
<td style="text-align:left">audio/x-liquid-secure</td>
<td style="text-align:left">.lbm</td>
<td style="text-align:left">application/x-lbm</td>
</tr>
<tr>
<td style="text-align:left">.lmsff</td>
<td style="text-align:left">audio/x-la-lms</td>
<td style="text-align:left">.ls</td>
<td style="text-align:left">application/x-javascript</td>
</tr>
<tr>
<td style="text-align:left">.ltr</td>
<td style="text-align:left">application/x-ltr</td>
<td style="text-align:left">.m1v</td>
<td style="text-align:left">video/x-mpeg</td>
</tr>
<tr>
<td style="text-align:left">.m2v</td>
<td style="text-align:left">video/x-mpeg</td>
<td style="text-align:left">.m3u</td>
<td style="text-align:left">audio/mpegurl</td>
</tr>
<tr>
<td style="text-align:left">.m4e</td>
<td style="text-align:left">video/mpeg4</td>
<td style="text-align:left">.mac</td>
<td style="text-align:left">application/x-mac</td>
</tr>
<tr>
<td style="text-align:left">.man</td>
<td style="text-align:left">application/x-troff-man</td>
<td style="text-align:left">.math</td>
<td style="text-align:left">text/xml</td>
</tr>
<tr>
<td style="text-align:left">.mdb</td>
<td style="text-align:left">application/msaccess</td>
<td style="text-align:left">.mdb</td>
<td style="text-align:left">application/x-mdb</td>
</tr>
<tr>
<td style="text-align:left">.mfp</td>
<td style="text-align:left">application/x-shockwave-flash</td>
<td style="text-align:left">.mht</td>
<td style="text-align:left">message/rfc822</td>
</tr>
<tr>
<td style="text-align:left">.mhtml</td>
<td style="text-align:left">message/rfc822</td>
<td style="text-align:left">.mi</td>
<td style="text-align:left">application/x-mi</td>
</tr>
<tr>
<td style="text-align:left">.mid</td>
<td style="text-align:left">audio/mid</td>
<td style="text-align:left">.midi</td>
<td style="text-align:left">audio/mid</td>
</tr>
<tr>
<td style="text-align:left">.mil</td>
<td style="text-align:left">application/x-mil</td>
<td style="text-align:left">.mml</td>
<td style="text-align:left">text/xml</td>
</tr>
<tr>
<td style="text-align:left">.mnd</td>
<td style="text-align:left">audio/x-musicnet-download</td>
<td style="text-align:left">.mns</td>
<td style="text-align:left">audio/x-musicnet-stream</td>
</tr>
<tr>
<td style="text-align:left">.mocha</td>
<td style="text-align:left">application/x-javascript</td>
<td style="text-align:left">.movie</td>
<td style="text-align:left">video/x-sgi-movie</td>
</tr>
<tr>
<td style="text-align:left">.mp1</td>
<td style="text-align:left">audio/mp1</td>
<td style="text-align:left">.mp2</td>
<td style="text-align:left">audio/mp2</td>
</tr>
<tr>
<td style="text-align:left">.mp2v</td>
<td style="text-align:left">video/mpeg</td>
<td style="text-align:left">.mp3</td>
<td style="text-align:left">audio/mp3</td>
</tr>
<tr>
<td style="text-align:left">.mp4</td>
<td style="text-align:left">video/mpeg4</td>
<td style="text-align:left">.mpa</td>
<td style="text-align:left">video/x-mpg</td>
</tr>
<tr>
<td style="text-align:left">.mpd</td>
<td style="text-align:left">application/vnd.ms-project</td>
<td style="text-align:left">.mpe</td>
<td style="text-align:left">video/x-mpeg</td>
</tr>
<tr>
<td style="text-align:left">.mpeg</td>
<td style="text-align:left">video/mpg</td>
<td style="text-align:left">.mpg</td>
<td style="text-align:left">video/mpg</td>
</tr>
<tr>
<td style="text-align:left">.mpga</td>
<td style="text-align:left">audio/rn-mpeg</td>
<td style="text-align:left">.mpp</td>
<td style="text-align:left">application/vnd.ms-project</td>
</tr>
<tr>
<td style="text-align:left">.mps</td>
<td style="text-align:left">video/x-mpeg</td>
<td style="text-align:left">.mpt</td>
<td style="text-align:left">application/vnd.ms-project</td>
</tr>
<tr>
<td style="text-align:left">.mpv</td>
<td style="text-align:left">video/mpg</td>
<td style="text-align:left">.mpv2</td>
<td style="text-align:left">video/mpeg</td>
</tr>
<tr>
<td style="text-align:left">.mpw</td>
<td style="text-align:left">application/vnd.ms-project</td>
<td style="text-align:left">.mpx</td>
<td style="text-align:left">application/vnd.ms-project</td>
</tr>
<tr>
<td style="text-align:left">.mtx</td>
<td style="text-align:left">text/xml</td>
<td style="text-align:left">.mxp</td>
<td style="text-align:left">application/x-mmxp</td>
</tr>
<tr>
<td style="text-align:left">.net</td>
<td style="text-align:left">image/pnetvue</td>
<td style="text-align:left">.nrf</td>
<td style="text-align:left">application/x-nrf</td>
</tr>
<tr>
<td style="text-align:left">.nws</td>
<td style="text-align:left">message/rfc822</td>
<td style="text-align:left">.odc</td>
<td style="text-align:left">text/x-ms-odc</td>
</tr>
<tr>
<td style="text-align:left">.out</td>
<td style="text-align:left">application/x-out</td>
<td style="text-align:left">.p10</td>
<td style="text-align:left">application/pkcs10</td>
</tr>
<tr>
<td style="text-align:left">.p12</td>
<td style="text-align:left">application/x-pkcs12</td>
<td style="text-align:left">.p7b</td>
<td style="text-align:left">application/x-pkcs7-certificates</td>
</tr>
<tr>
<td style="text-align:left">.p7c</td>
<td style="text-align:left">application/pkcs7-mime</td>
<td style="text-align:left">.p7m</td>
<td style="text-align:left">application/pkcs7-mime</td>
</tr>
<tr>
<td style="text-align:left">.p7r</td>
<td style="text-align:left">application/x-pkcs7-certreqresp</td>
<td style="text-align:left">.p7s</td>
<td style="text-align:left">application/pkcs7-signature</td>
</tr>
<tr>
<td style="text-align:left">.pc5</td>
<td style="text-align:left">application/x-pc5</td>
<td style="text-align:left">.pci</td>
<td style="text-align:left">application/x-pci</td>
</tr>
<tr>
<td style="text-align:left">.pcl</td>
<td style="text-align:left">application/x-pcl</td>
<td style="text-align:left">.pcx</td>
<td style="text-align:left">application/x-pcx</td>
</tr>
<tr>
<td style="text-align:left">.pdf</td>
<td style="text-align:left">application/pdf</td>
<td style="text-align:left">.pdf</td>
<td style="text-align:left">application/pdf</td>
</tr>
<tr>
<td style="text-align:left">.pdx</td>
<td style="text-align:left">application/vnd.adobe.pdx</td>
<td style="text-align:left">.pfx</td>
<td style="text-align:left">application/x-pkcs12</td>
</tr>
<tr>
<td style="text-align:left">.pgl</td>
<td style="text-align:left">application/x-pgl</td>
<td style="text-align:left">.pic</td>
<td style="text-align:left">application/x-pic</td>
</tr>
<tr>
<td style="text-align:left">.pko</td>
<td style="text-align:left">application/vnd.ms-pki.pko</td>
<td style="text-align:left">.pl</td>
<td style="text-align:left">application/x-perl</td>
</tr>
<tr>
<td style="text-align:left">.plg</td>
<td style="text-align:left">text/html</td>
<td style="text-align:left">.pls</td>
<td style="text-align:left">audio/scpls</td>
</tr>
<tr>
<td style="text-align:left">.plt</td>
<td style="text-align:left">application/x-plt</td>
<td style="text-align:left">.png</td>
<td style="text-align:left">image/png</td>
</tr>
<tr>
<td style="text-align:left">.png</td>
<td style="text-align:left">application/x-png</td>
<td style="text-align:left">.pot</td>
<td style="text-align:left">application/vnd.ms-powerpoint</td>
</tr>
<tr>
<td style="text-align:left">.ppa</td>
<td style="text-align:left">application/vnd.ms-powerpoint</td>
<td style="text-align:left">.ppm</td>
<td style="text-align:left">application/x-ppm</td>
</tr>
<tr>
<td style="text-align:left">.pps</td>
<td style="text-align:left">application/vnd.ms-powerpoint</td>
<td style="text-align:left">.ppt</td>
<td style="text-align:left">application/vnd.ms-powerpoint</td>
</tr>
<tr>
<td style="text-align:left">.ppt</td>
<td style="text-align:left">application/x-ppt</td>
<td style="text-align:left">.pr</td>
<td style="text-align:left">application/x-pr</td>
</tr>
<tr>
<td style="text-align:left">.prf</td>
<td style="text-align:left">application/pics-rules</td>
<td style="text-align:left">.prn</td>
<td style="text-align:left">application/x-prn</td>
</tr>
<tr>
<td style="text-align:left">.prt</td>
<td style="text-align:left">application/x-prt</td>
<td style="text-align:left">.ps</td>
<td style="text-align:left">application/x-ps</td>
</tr>
<tr>
<td style="text-align:left">.ps</td>
<td style="text-align:left">application/postscript</td>
<td style="text-align:left">.ptn</td>
<td style="text-align:left">application/x-ptn</td>
</tr>
<tr>
<td style="text-align:left">.pwz</td>
<td style="text-align:left">application/vnd.ms-powerpoint</td>
<td style="text-align:left">.r3t</td>
<td style="text-align:left">text/vnd.rn-realtext3d</td>
</tr>
<tr>
<td style="text-align:left">.ra</td>
<td style="text-align:left">audio/vnd.rn-realaudio</td>
<td style="text-align:left">.ram</td>
<td style="text-align:left">audio/x-pn-realaudio</td>
</tr>
<tr>
<td style="text-align:left">.ras</td>
<td style="text-align:left">application/x-ras</td>
<td style="text-align:left">.rat</td>
<td style="text-align:left">application/rat-file</td>
</tr>
<tr>
<td style="text-align:left">.rdf</td>
<td style="text-align:left">text/xml</td>
<td style="text-align:left">.rec</td>
<td style="text-align:left">application/vnd.rn-recording</td>
</tr>
<tr>
<td style="text-align:left">.red</td>
<td style="text-align:left">application/x-red</td>
<td style="text-align:left">.rgb</td>
<td style="text-align:left">application/x-rgb</td>
</tr>
<tr>
<td style="text-align:left">.rjs</td>
<td style="text-align:left">application/vnd.rn-realsystem-rjs</td>
<td style="text-align:left">.rjt</td>
<td style="text-align:left">application/vnd.rn-realsystem-rjt</td>
</tr>
<tr>
<td style="text-align:left">.rlc</td>
<td style="text-align:left">application/x-rlc</td>
<td style="text-align:left">.rle</td>
<td style="text-align:left">application/x-rle</td>
</tr>
<tr>
<td style="text-align:left">.rm</td>
<td style="text-align:left">application/vnd.rn-realmedia</td>
<td style="text-align:left">.rmf</td>
<td style="text-align:left">application/vnd.adobe.rmf</td>
</tr>
<tr>
<td style="text-align:left">.rmi</td>
<td style="text-align:left">audio/mid</td>
<td style="text-align:left">.rmj</td>
<td style="text-align:left">application/vnd.rn-realsystem-rmj</td>
</tr>
<tr>
<td style="text-align:left">.rmm</td>
<td style="text-align:left">audio/x-pn-realaudio</td>
<td style="text-align:left">.rmp</td>
<td style="text-align:left">application/vnd.rn-rn_music_package</td>
</tr>
<tr>
<td style="text-align:left">.rms</td>
<td style="text-align:left">application/vnd.rn-realmedia-secure</td>
<td style="text-align:left">.rmvb</td>
<td style="text-align:left">application/vnd.rn-realmedia-vbr</td>
</tr>
<tr>
<td style="text-align:left">.rmx</td>
<td style="text-align:left">application/vnd.rn-realsystem-rmx</td>
<td style="text-align:left">.rnx</td>
<td style="text-align:left">application/vnd.rn-realplayer</td>
</tr>
<tr>
<td style="text-align:left">.rp</td>
<td style="text-align:left">image/vnd.rn-realpix</td>
<td style="text-align:left">.rpm</td>
<td style="text-align:left">audio/x-pn-realaudio-plugin</td>
</tr>
<tr>
<td style="text-align:left">.rsml</td>
<td style="text-align:left">application/vnd.rn-rsml</td>
<td style="text-align:left">.rt</td>
<td style="text-align:left">text/vnd.rn-realtext</td>
</tr>
<tr>
<td style="text-align:left">.rtf</td>
<td style="text-align:left">application/msword</td>
<td style="text-align:left">.rtf</td>
<td style="text-align:left">application/x-rtf</td>
</tr>
<tr>
<td style="text-align:left">.rv</td>
<td style="text-align:left">video/vnd.rn-realvideo</td>
<td style="text-align:left">.sam</td>
<td style="text-align:left">application/x-sam</td>
</tr>
<tr>
<td style="text-align:left">.sat</td>
<td style="text-align:left">application/x-sat</td>
<td style="text-align:left">.sdp</td>
<td style="text-align:left">application/sdp</td>
</tr>
<tr>
<td style="text-align:left">.sdw</td>
<td style="text-align:left">application/x-sdw</td>
<td style="text-align:left">.sit</td>
<td style="text-align:left">application/x-stuffit</td>
</tr>
<tr>
<td style="text-align:left">.slb</td>
<td style="text-align:left">application/x-slb</td>
<td style="text-align:left">.sld</td>
<td style="text-align:left">application/x-sld</td>
</tr>
<tr>
<td style="text-align:left">.slk</td>
<td style="text-align:left">drawing/x-slk</td>
<td style="text-align:left">.smi</td>
<td style="text-align:left">application/smil</td>
</tr>
<tr>
<td style="text-align:left">.smil</td>
<td style="text-align:left">application/smil</td>
<td style="text-align:left">.smk</td>
<td style="text-align:left">application/x-smk</td>
</tr>
<tr>
<td style="text-align:left">.snd</td>
<td style="text-align:left">audio/basic</td>
<td style="text-align:left">.sol</td>
<td style="text-align:left">text/plain</td>
</tr>
<tr>
<td style="text-align:left">.sor</td>
<td style="text-align:left">text/plain</td>
<td style="text-align:left">.spc</td>
<td style="text-align:left">application/x-pkcs7-certificates</td>
</tr>
<tr>
<td style="text-align:left">.spl</td>
<td style="text-align:left">application/futuresplash</td>
<td style="text-align:left">.spp</td>
<td style="text-align:left">text/xml</td>
</tr>
<tr>
<td style="text-align:left">.ssm</td>
<td style="text-align:left">application/streamingmedia</td>
<td style="text-align:left">.sst</td>
<td style="text-align:left">application/vnd.ms-pki.certstore</td>
</tr>
<tr>
<td style="text-align:left">.stl</td>
<td style="text-align:left">application/vnd.ms-pki.stl</td>
<td style="text-align:left">.stm</td>
<td style="text-align:left">text/html</td>
</tr>
<tr>
<td style="text-align:left">.sty</td>
<td style="text-align:left">application/x-sty</td>
<td style="text-align:left">.svg</td>
<td style="text-align:left">text/xml</td>
</tr>
<tr>
<td style="text-align:left">.swf</td>
<td style="text-align:left">application/x-shockwave-flash</td>
<td style="text-align:left">.tdf</td>
<td style="text-align:left">application/x-tdf</td>
</tr>
<tr>
<td style="text-align:left">.tg4</td>
<td style="text-align:left">application/x-tg4</td>
<td style="text-align:left">.tga</td>
<td style="text-align:left">application/x-tga</td>
</tr>
<tr>
<td style="text-align:left">.tif</td>
<td style="text-align:left">image/tiff</td>
<td style="text-align:left">.tif</td>
<td style="text-align:left">application/x-tif</td>
</tr>
<tr>
<td style="text-align:left">.tiff</td>
<td style="text-align:left">image/tiff</td>
<td style="text-align:left">.tld</td>
<td style="text-align:left">text/xml</td>
</tr>
<tr>
<td style="text-align:left">.top</td>
<td style="text-align:left">drawing/x-top</td>
<td style="text-align:left">.torrent</td>
<td style="text-align:left">application/x-bittorrent</td>
</tr>
<tr>
<td style="text-align:left">.tsd</td>
<td style="text-align:left">text/xml</td>
<td style="text-align:left">.txt</td>
<td style="text-align:left">text/plain</td>
</tr>
<tr>
<td style="text-align:left">.uin</td>
<td style="text-align:left">application/x-icq</td>
<td style="text-align:left">.uls</td>
<td style="text-align:left">text/iuls</td>
</tr>
<tr>
<td style="text-align:left">.vcf</td>
<td style="text-align:left">text/x-vcard</td>
<td style="text-align:left">.vda</td>
<td style="text-align:left">application/x-vda</td>
</tr>
<tr>
<td style="text-align:left">.vdx</td>
<td style="text-align:left">application/vnd.visio</td>
<td style="text-align:left">.vml</td>
<td style="text-align:left">text/xml</td>
</tr>
<tr>
<td style="text-align:left">.vpg</td>
<td style="text-align:left">application/x-vpeg005</td>
<td style="text-align:left">.vsd</td>
<td style="text-align:left">application/vnd.visio</td>
</tr>
<tr>
<td style="text-align:left">.vsd</td>
<td style="text-align:left">application/x-vsd</td>
<td style="text-align:left">.vss</td>
<td style="text-align:left">application/vnd.visio</td>
</tr>
<tr>
<td style="text-align:left">.vst</td>
<td style="text-align:left">application/vnd.visio</td>
<td style="text-align:left">.vst</td>
<td style="text-align:left">application/x-vst</td>
</tr>
<tr>
<td style="text-align:left">.vsw</td>
<td style="text-align:left">application/vnd.visio</td>
<td style="text-align:left">.vsx</td>
<td style="text-align:left">application/vnd.visio</td>
</tr>
<tr>
<td style="text-align:left">.vtx</td>
<td style="text-align:left">application/vnd.visio</td>
<td style="text-align:left">.vxml</td>
<td style="text-align:left">text/xml</td>
</tr>
<tr>
<td style="text-align:left">.wav</td>
<td style="text-align:left">audio/wav</td>
<td style="text-align:left">.wax</td>
<td style="text-align:left">audio/x-ms-wax</td>
</tr>
<tr>
<td style="text-align:left">.wb1</td>
<td style="text-align:left">application/x-wb1</td>
<td style="text-align:left">.wb2</td>
<td style="text-align:left">application/x-wb2</td>
</tr>
<tr>
<td style="text-align:left">.wb3</td>
<td style="text-align:left">application/x-wb3</td>
<td style="text-align:left">.wbmp</td>
<td style="text-align:left">image/vnd.wap.wbmp</td>
</tr>
<tr>
<td style="text-align:left">.wiz</td>
<td style="text-align:left">application/msword</td>
<td style="text-align:left">.wk3</td>
<td style="text-align:left">application/x-wk3</td>
</tr>
<tr>
<td style="text-align:left">.wk4</td>
<td style="text-align:left">application/x-wk4</td>
<td style="text-align:left">.wkq</td>
<td style="text-align:left">application/x-wkq</td>
</tr>
<tr>
<td style="text-align:left">.wks</td>
<td style="text-align:left">application/x-wks</td>
<td style="text-align:left">.wm</td>
<td style="text-align:left">video/x-ms-wm</td>
</tr>
<tr>
<td style="text-align:left">.wma</td>
<td style="text-align:left">audio/x-ms-wma</td>
<td style="text-align:left">.wmd</td>
<td style="text-align:left">application/x-ms-wmd</td>
</tr>
<tr>
<td style="text-align:left">.wmf</td>
<td style="text-align:left">application/x-wmf</td>
<td style="text-align:left">.wml</td>
<td style="text-align:left">text/vnd.wap.wml</td>
</tr>
<tr>
<td style="text-align:left">.wmv</td>
<td style="text-align:left">video/x-ms-wmv</td>
<td style="text-align:left">.wmx</td>
<td style="text-align:left">video/x-ms-wmx</td>
</tr>
<tr>
<td style="text-align:left">.wmz</td>
<td style="text-align:left">application/x-ms-wmz</td>
<td style="text-align:left">.wp6</td>
<td style="text-align:left">application/x-wp6</td>
</tr>
<tr>
<td style="text-align:left">.wpd</td>
<td style="text-align:left">application/x-wpd</td>
<td style="text-align:left">.wpg</td>
<td style="text-align:left">application/x-wpg</td>
</tr>
<tr>
<td style="text-align:left">.wpl</td>
<td style="text-align:left">application/vnd.ms-wpl</td>
<td style="text-align:left">.wq1</td>
<td style="text-align:left">application/x-wq1</td>
</tr>
<tr>
<td style="text-align:left">.wr1</td>
<td style="text-align:left">application/x-wr1</td>
<td style="text-align:left">.wri</td>
<td style="text-align:left">application/x-wri</td>
</tr>
<tr>
<td style="text-align:left">.wrk</td>
<td style="text-align:left">application/x-wrk</td>
<td style="text-align:left">.ws</td>
<td style="text-align:left">application/x-ws</td>
</tr>
<tr>
<td style="text-align:left">.ws2</td>
<td style="text-align:left">application/x-ws</td>
<td style="text-align:left">.wsc</td>
<td style="text-align:left">text/scriptlet</td>
</tr>
<tr>
<td style="text-align:left">.wsdl</td>
<td style="text-align:left">text/xml</td>
<td style="text-align:left">.wvx</td>
<td style="text-align:left">video/x-ms-wvx</td>
</tr>
<tr>
<td style="text-align:left">.xdp</td>
<td style="text-align:left">application/vnd.adobe.xdp</td>
<td style="text-align:left">.xdr</td>
<td style="text-align:left">text/xml</td>
</tr>
<tr>
<td style="text-align:left">.xfd</td>
<td style="text-align:left">application/vnd.adobe.xfd</td>
<td style="text-align:left">.xfdf</td>
<td style="text-align:left">application/vnd.adobe.xfdf</td>
</tr>
<tr>
<td style="text-align:left">.xhtml</td>
<td style="text-align:left">text/html</td>
<td style="text-align:left">.xls</td>
<td style="text-align:left">application/vnd.ms-excel</td>
</tr>
<tr>
<td style="text-align:left">.xls</td>
<td style="text-align:left">application/x-xls</td>
<td style="text-align:left">.xlw</td>
<td style="text-align:left">application/x-xlw</td>
</tr>
<tr>
<td style="text-align:left">.xml</td>
<td style="text-align:left">text/xml</td>
<td style="text-align:left">.xpl</td>
<td style="text-align:left">audio/scpls</td>
</tr>
<tr>
<td style="text-align:left">.xq</td>
<td style="text-align:left">text/xml</td>
<td style="text-align:left">.xql</td>
<td style="text-align:left">text/xml</td>
</tr>
<tr>
<td style="text-align:left">.xquery</td>
<td style="text-align:left">text/xml</td>
<td style="text-align:left">.xsd</td>
<td style="text-align:left">text/xml</td>
</tr>
<tr>
<td style="text-align:left">.xsl</td>
<td style="text-align:left">text/xml</td>
<td style="text-align:left">.xslt</td>
<td style="text-align:left">text/xml</td>
</tr>
<tr>
<td style="text-align:left">.xwd</td>
<td style="text-align:left">application/x-xwd</td>
<td style="text-align:left">.x_b</td>
<td style="text-align:left">application/x-x_b</td>
</tr>
<tr>
<td style="text-align:left">.sis</td>
<td style="text-align:left">application/vnd.symbian.install</td>
<td style="text-align:left">.sisx</td>
<td style="text-align:left">application/vnd.symbian.install</td>
</tr>
<tr>
<td style="text-align:left">.x_t</td>
<td style="text-align:left">application/x-x_t</td>
<td style="text-align:left">.ipa</td>
<td style="text-align:left">application/vnd.iphone</td>
</tr>
<tr>
<td style="text-align:left">.apk</td>
<td style="text-align:left">application/vnd.android.package-archive</td>
<td style="text-align:left">.xap</td>
<td style="text-align:left">application/x-silverlight-app</td>
</tr>
</tbody>
</table>
]]></content>
    </entry>
    <entry>
        <title type="html"><![CDATA[http-其他首部字段]]></title>
        <id>https://leecss.com/post/http-qi-ta-shou-bu-zi-duan/</id>
        <link href="https://leecss.com/post/http-qi-ta-shou-bu-zi-duan/">
        </link>
        <updated>2021-07-22T00:13:10.000Z</updated>
        <content type="html"><![CDATA[<h2 id="概述">概述</h2>
<p>HTTP 首部字段是可以自行扩展的。所以在 Web 服务器和浏览器的应用上，会出现各种非标准的首部字段。</p>
<h2 id="常用的首部字段">常用的首部字段</h2>
<h3 id="x-frame-options">X-Frame-Options</h3>
<p>首部字段 X-Frame-Options 属于 HTTP 响应首部，用于控制网站内容在其他 Web 网站的 Frame 标签内的显示问题。其主要目的是为了防止点击劫持（clickjacking）攻击。</p>
<p>取值：</p>
<ul>
<li><strong>DENY</strong>：表示该页面不允许在 frame 中展示，即便是在相同域名的页面中嵌套也不允许。</li>
<li><strong>SAMEORIGIN</strong>：表示该页面可以在相同域名页面的 frame 中展示。</li>
<li><strong>ALLOW-FROM uri</strong>：表示该页面可以在指定来源的 frame 中展示。</li>
</ul>
<pre><code class="language-http">X-Frame-Options: DENY
X-Frame-Options: SAMEORIGIN
X-Frame-Options: ALLOW-FROM http://hackr.jp
</code></pre>
<h3 id="x-xss-protection">X-XSS-Protection</h3>
<p>首部字段 X-XSS-Protection 属于 HTTP 响应首部，它是针对跨站脚本攻击（XSS）的一种对策，用于控制浏览器 XSS 防护机制的开关。</p>
<p>当检测到跨站脚本攻击 (XSS)时，浏览器将停止加载页面。针对现代浏览器，会选择更强大的Content-Security-Policy。</p>
<pre><code>X-XSS-Protection: 0  //禁止XSS过滤。
X-XSS-Protection: 1  //启用XSS过滤（通常浏览器是默认的）。如果检测到跨站脚本攻击，浏览器将清除页面（删除不安全的部分）。
X-XSS-Protection: 1; mode=block //启用XSS过滤。 如果检测到攻击，浏览器将不会清除页面，而是阻止页面加载。
X-XSS-Protection: 1; report=&lt;reporting-uri&gt; //启用XSS过滤。 如果检测到跨站脚本攻击，浏览器将清除页面并使用CSP report-uri指令的功能发送违规报告。
</code></pre>
<h3 id="dnt">DNT</h3>
<p>首部字段 DNT 属于 HTTP 请求首部，其中 DNT 是 Do Not Track 的简称，意为拒绝个人信息被收集，是表示拒绝被精准广告追踪的一种方法。</p>
<pre><code class="language-http">DNT:0 //同意被追踪
DNT:1 //拒绝被追踪
</code></pre>
<p>由于首部字段 DNT 的功能具备有效性，所以 Web 服务器需要对 DNT做对应的支持。</p>
]]></content>
    </entry>
    <entry>
        <title type="html"><![CDATA[http-cookie相关首部字段]]></title>
        <id>https://leecss.com/post/http-cookie-xiang-guan-shou-bu-zi-duan/</id>
        <link href="https://leecss.com/post/http-cookie-xiang-guan-shou-bu-zi-duan/">
        </link>
        <updated>2021-07-21T23:58:55.000Z</updated>
        <content type="html"><![CDATA[<h2 id="概述">概述</h2>
<p>管理服务器与客户端之间状态的 Cookie，虽然没有被编入标准化HTTP/1.1 的 RFC2616 中，但在 Web 网站方面得到了广泛的应用。</p>
<p>Cookie 的工作机制是用户识别及状态管理。Web 网站为了管理用户的状态会通过 Web 浏览器，把一些数据临时写入用户的计算机内。接着当用户访问该Web网站时，可通过通信方式取回之前发放的Cookie。</p>
<p>调用 Cookie 时，由于可校验 Cookie 的有效期，以及发送方的域、路径、协议等信息，所以正规发布的 Cookie 内的数据不会因来自其他Web 站点和攻击者的攻击而泄露。</p>
<table>
<thead>
<tr>
<th>首部字段名</th>
<th>说明</th>
<th>首部类型</th>
</tr>
</thead>
<tbody>
<tr>
<td>Set-Cookie</td>
<td>开始状态管理所使用的Cookie信息</td>
<td>响应首部字段</td>
</tr>
<tr>
<td>Cookie</td>
<td>服务器接收到的Cookie信息</td>
<td>请求首部字段</td>
</tr>
</tbody>
</table>
<h2 id="服务器">服务器</h2>
<p>当服务器准备开始管理客户端的状态时，会事先告知各种信息。</p>
<table>
<thead>
<tr>
<th>属性</th>
<th>说明</th>
</tr>
</thead>
<tbody>
<tr>
<td>NAME=VALUE</td>
<td>赋予 Cookie 的名称和其值（必需项）</td>
</tr>
<tr>
<td>expires=DATE</td>
<td>Cookie的有效期（若不明确指定则默认为浏览器关闭前为止）</td>
</tr>
<tr>
<td>path=PATH</td>
<td>将服务器上的文件目录作为Cookie的适用对象（若不指定则默认为文档所在的文件目录）</td>
</tr>
<tr>
<td>domain=域名</td>
<td>作为 Cookie 适用对象的域名 （若不指定则默认为创建 Cookie的服务器的域名）</td>
</tr>
<tr>
<td>Secure</td>
<td>仅在 HTTPS 安全通信时才会发送 Cookie</td>
</tr>
<tr>
<td>HttpOnly</td>
<td>加以限制，使 Cookie 不能被 JavaScript 脚本访问</td>
</tr>
</tbody>
</table>
<h3 id="expires">expires</h3>
<p>Cookie 的 expires 属性指定浏览器可发送 Cookie 的有效期。</p>
<p>当省略 expires 属性时，其有效期仅限于维持浏览器会话（Session）时间段内。这通常限于浏览器应用程序被关闭之前。</p>
<p>另外，一旦 Cookie 从服务器端发送至客户端，服务器端就不存在可以显式删除 Cookie 的方法。但可通过覆盖已过期的 Cookie，实现对客户端 Cookie 的实质性删除操作。</p>
<h3 id="path">path</h3>
<p>限定可以发送Cookie的路径</p>
<p>Cookie 的 path 属性可用于限制指定 Cookie 的发送范围的文件目录。</p>
<h3 id="domain">domain</h3>
<p>通过 Cookie 的 domain 属性指定的域名可做到与结尾匹配一致。比如，当指定 <code>example.com</code> 后，除<code>example.com</code> 以外，<code>www.example.com</code>或 <code>www2.example.com</code> 等都可以发送 Cookie。</p>
<p>因此，除了针对具体指定的多个域名发送 Cookie 之 外，不指定domain 属性显得更安全。</p>
<h3 id="secure">secure</h3>
<p>Cookie 的 secure 属性用于限制 Web 页面仅在 HTTPS 安全连接时，才可以发送 Cookie。</p>
<pre><code class="language-http">Set-Cookie: name=value; secure
</code></pre>
<p>以上例子仅当在 <code>https://www.example.com/</code>（HTTPS）安全连接的情况下才会进行 Cookie 的回收。也就是说，即使域名相同，<code>http://www.example.com/</code>（HTTP）也不会发生 Cookie 回收行为。</p>
<p>当省略 secure 属性时，不论 HTTP 还是 HTTPS，都会对 Cookie 进行回收。</p>
<h3 id="httponly">HttpOnly</h3>
<p>Cookie 的 HttpOnly 属性是 Cookie 的扩展功能，它使 JavaScript 脚本无法获得 Cookie。其主要目的为防止跨站脚本攻击（Cross-site scripting，XSS）对 Cookie 的信息窃取。</p>
<pre><code class="language-http">Set-Cookie: name=value; HttpOnly
</code></pre>
<p>通过上述设置，通常从 Web 页面内还可以对 Cookie 进行读取操作。但使用 JavaScript 的 document.cookie 就无法读取附加 HttpOnly 属性后的 Cookie 的内容了。因此，也就无法在 XSS 中利用 JavaScript 劫持Cookie 了。</p>
<h2 id="客户端">客户端</h2>
<p>首部字段 Cookie 会告知服务器，当客户端想获得 HTTP 状态管理支持时，就会在请求中包含从服务器接收到的 Cookie。接收到多个Cookie 时，同样可以以多个 Cookie 形式发送。</p>
<pre><code class="language-http">Cookie: status=enable
</code></pre>
]]></content>
    </entry>
    <entry>
        <title type="html"><![CDATA[http-实体首部字段]]></title>
        <id>https://leecss.com/post/http-shi-ti-shou-bu-zi-duan/</id>
        <link href="https://leecss.com/post/http-shi-ti-shou-bu-zi-duan/">
        </link>
        <updated>2021-07-21T23:33:49.000Z</updated>
        <content type="html"><![CDATA[<h2 id="概述">概述</h2>
<p>实体首部字段是包含在请求报文和响应报文中的实体部分所使用的首部，用于补充内容的更新时间等与实体相关的信息。</p>
<h2 id="列表">列表</h2>
<table>
<thead>
<tr>
<th>实体首部</th>
<th>作用（补充请求报文或响应报文相关信息）</th>
</tr>
</thead>
<tbody>
<tr>
<td>Allow</td>
<td>告诉客户端资源所支持的HTTP方法：<code>GET HEAD POST</code></td>
</tr>
<tr>
<td>Content-Encoding</td>
<td>告知客户端，服务器对实体主体部分选用的内容编码方式：<code>gzip deflate</code></td>
</tr>
<tr>
<td>Content-Language</td>
<td>告知客户端，实体主体使用的自然语言。：<code>zh-CN</code></td>
</tr>
<tr>
<td>Content-Length</td>
<td>表明实体主体部分的大小，单位是字节。</td>
</tr>
<tr>
<td>Content-Location</td>
<td>表示返回的数据对应的URI</td>
</tr>
<tr>
<td>Content-MD5</td>
<td>Base64加密格式的内容 MD5检验值</td>
</tr>
<tr>
<td>Content-Range</td>
<td>主要用于范围请求，告知客户端当前发送部分的内容范围以及整个实体大小。</td>
</tr>
<tr>
<td>Content-Type</td>
<td>表明实体主体内对象的媒体类型。</td>
</tr>
<tr>
<td>Expires</td>
<td>内容的过期时间</td>
</tr>
<tr>
<td>Last_modified</td>
<td>内容的最后修改时间</td>
</tr>
</tbody>
</table>
<h3 id="allow">Allow</h3>
<p>首部字段 Allow 用于通知客户端能够支持 Request-URI 指定资源的所有 HTTP 方法。当服务器接收到不支持的 HTTP 方法时，会以状态码405 Method Not Allowed 作为响应返回。与此同时，还会把所有能支持的 HTTP 方法写入首部字段 Allow 后返回。</p>
<pre><code class="language-http">Allow: GET, HEAD
</code></pre>
<h3 id="content-encoding">Content-Encoding</h3>
<p>首部字段 Content-Encoding 会告知客户端服务器对实体的主体部分选用的内容编码方式。内容编码是指在不丢失实体信息的前提下所进行的压缩。</p>
<p>告知客户端以同样的方式解压。</p>
<p>主要采用以下 4 种内容编码的方式。</p>
<pre><code>gzip
compress
deflate
identity
</code></pre>
<pre><code class="language-http">Content-Encoding: gzip
</code></pre>
<h3 id="content-language">Content-Language</h3>
<p>首部字段 Content-Language 会告知客户端，实体主体使用的自然语言（指中文或英文等语言）。</p>
<pre><code class="language-http">Content-Language: zh-CN
</code></pre>
<h3 id="content-length">Content-Length</h3>
<p>首部字段 Content-Length 表明了实体主体部分的大小（单位是字节）。对实体主体进行内容编码传输时，不能再使用 Content-Length首部字段。</p>
<pre><code class="language-http">Content-Length: 15000
</code></pre>
<p>该资源的大小为15000字节</p>
<h3 id="content-location">Content-Location</h3>
<p>首部字段 Content-Location 给出与报文主体部分相对应的 URI。和首部字段 Location 不同，Content-Location 表示的是报文主体返回资源对应的 URI。</p>
<p>比如，对于使用首部字段 Accept-Language 的服务器驱动型请求，当返回的页面内容与实际请求的对象不同时，首部字段 Content-Location内会写明 URI。（访问 <code>http://www.hackr.jp/</code> 返回的对象却是<code>http://www.hackr.jp/index-ja.html</code> 等类似情况）</p>
<pre><code class="language-http">Content-Location: http://www.hackr.jp/index-ja.html
</code></pre>
<h3 id="content-md5">Content-MD5</h3>
<p>首部字段 Content-MD5 是一串由 MD5 算法生成的值，其目的在于检查报文主体在传输过程中是否保持完整，以及确认传输到达。</p>
<p>对报文主体执行 MD5 算法获得的 128 位二进制数，再通过 Base64 编码后将结果写入 Content-MD5 字段值。由于 HTTP 首部无法记录二进制值，所以要通过 Base64 编码处理。为确保报文的有效性，作为接收方的客户端会对报文主体再执行一次相同的 MD5 算法。计算出的值与字段值作比较后，即可判断出报文主体的准确性。</p>
<p>采用这种方法，对内容上的偶发性改变是无从查证的，也无法检测出恶意篡改。其中一个原因在于，内容如果能够被篡改，那么同时意味着 Content-MD5 也可重新计算然后被篡改。所以处在接收阶段的客户端是无法意识到报文主体以及首部字段 Content-MD5 是已经被篡改过的。</p>
<pre><code class="language-http">Content-MD5: OGFkZDUwNGVhNGY3N2MxMDIwZmQ4NTBmY2IyTY==
</code></pre>
<pre><code>报文主体 -&gt; MD5算法 -&gt; Base64编码
</code></pre>
<h3 id="content-range">Content-Range</h3>
<p>针对范围请求，返回响应时使用的首部字段 Content-Range，能告知客户端作为响应返回的实体的哪个部分符合范围请求。字段值以字节为单位，表示当前发送部分及整个实体大小。</p>
<pre><code class="language-http">Content-Range: bytes 5001-10000/10000
</code></pre>
<h3 id="content-type">Content-Type</h3>
<p>首部字段 Content-Type 说明了实体主体内对象的媒体类型。和首部字段 Accept 一样，字段值用 type/subtype 形式赋值。<br>
参数 charset 使用 iso-8859-1 或 euc-jp 等字符集进行赋值。</p>
<pre><code class="language-http">Content-Type: text/html; charset=UTF-8
</code></pre>
<h3 id="expires">Expires</h3>
<p>首部字段 Expires 会将资源失效的日期告知客户端。缓存服务器在接收到含有首部字段 Expires 的响应后，会以缓存来应答请求，在Expires 字段值指定的时间之前，响应的副本会一直被保存。当超过指定的时间后，缓存服务器在请求发送过来时，会转向源服务器请求资源。</p>
<p>源服务器不希望缓存服务器对资源缓存时，最好在 Expires 字段内写入与首部字段 Date 相同的时间值。</p>
<p>但是，当首部字段 Cache-Control 有指定 max-age 指令时，比起首部字段 Expires，会优先处理 max-age 指令。</p>
<pre><code class="language-http">Expires: Wed, 04 Jul 2012 08:26:05 GMT
</code></pre>
<p>源服务器告知缓存服务器此缓存可使用到2012年7月4日</p>
<h3 id="last-modified">Last-Modified</h3>
<p>首部字段 Last-Modified 指明资源最终修改的时间。一般来说，这个值就是 Request-URI 指定资源被修改的时间。但类似使用 CGI 脚本进行动态数据处理时，该值有可能会变成数据最终修改时的时间。</p>
<pre><code class="language-http">Last-Modified: Wed, 23 May 2012 09:59:55 GMT
</code></pre>
]]></content>
    </entry>
    <entry>
        <title type="html"><![CDATA[http-响应首部字段]]></title>
        <id>https://leecss.com/post/http-xiang-ying-shou-bu-zi-duan/</id>
        <link href="https://leecss.com/post/http-xiang-ying-shou-bu-zi-duan/">
        </link>
        <updated>2021-07-21T14:22:10.000Z</updated>
        <content type="html"><![CDATA[<h2 id="概述">概述</h2>
<p>响应首部字段是由服务器端向客户端返回响应报文中所使用的字段，用于补充响应的附加信息、服务器信息，以及对客户端的附加要求等信息。</p>
<h2 id="列表">列表</h2>
<table>
<thead>
<tr>
<th>响应首部</th>
<th>作用（响应报文专用）</th>
</tr>
</thead>
<tbody>
<tr>
<td>Accept-Ranges</td>
<td>告知客户端服务器是否可接受范围请求，是<code>bytes</code>，否<code>none</code></td>
</tr>
<tr>
<td>Age</td>
<td>资源在代理缓存中存在的时间</td>
</tr>
<tr>
<td>ETag</td>
<td>资源标识，资源发生变化时标识也会发生改变</td>
</tr>
<tr>
<td>Location</td>
<td>客户端重定向到某个 URL</td>
</tr>
<tr>
<td>Proxy-Authenticate</td>
<td>向代理服务器发送验证信息</td>
</tr>
<tr>
<td>Retry-After</td>
<td>告知客户端应该在多久之后再次发送请求</td>
</tr>
<tr>
<td>Server</td>
<td>服务器名字：<code>Apache Nginx</code></td>
</tr>
<tr>
<td>Vary</td>
<td>对缓存进行控制 <code>Vary: Accept-Language</code></td>
</tr>
<tr>
<td>WWW-Authenticate</td>
<td>定义了使用何种验证方式去获取对资源的连接。</td>
</tr>
</tbody>
</table>
<h3 id="accept-ranges">Accept-Ranges</h3>
<p>首部字段 Accept-Ranges 是用来告知客户端服务器是否能处理范围请求，以指定获取服务器端某个部分的资源。</p>
<p>可指定的字段值有两种，可处理范围请求时指定其为 bytes，反之则指定其为 none。</p>
<pre><code class="language-http">Accept-Ranges: bytes
Accept-Ranges: none    //不支持范围请求
</code></pre>
<h3 id="age">Age</h3>
<p>首部字段 Age 能告知客户端，源服务器在多久前创建了响应。字段值的单位为秒。</p>
<p>若创建该响应的服务器是缓存服务器，Age 值是指缓存后的响应再次发起认证到认证完成的时间值。代理创建响应时必须加上首部字段Age。</p>
<pre><code class="language-http">Age: 600
</code></pre>
<h3 id="etag">ETag</h3>
<pre><code class="language-http">ETag: &quot;82e22293907ce725faf67773957acd12&quot;
</code></pre>
<p>首部字段 ETag 能告知客户端实体标识。它是一种可将资源以字符串形式做唯一性标识的方式。服务器会为每份资源分配对应的 ETag值。</p>
<p>另外，当资源更新时，ETag 值也需要更新。生成 ETag 值时，并没有统一的算法规则，而仅仅是由服务器来分配。</p>
<p>资源被缓存时，就会被分配唯一性标识。例如，当使用中文版的浏览器访问 <code>http://www.google.com/</code> 时，就会返回中文版对应的资源，而使用英文版的浏览器访问时，则会返回英文版对应的资源。两者的URI 是相同的，所以仅凭 URI 指定缓存的资源是相当困难的。若在下载过程中出现连接中断、再连接的情况，都会依照 ETag 值来指定资源。</p>
<p><strong>强 ETag 值和弱 Tag 值</strong></p>
<p>ETag 中有强 ETag 值和弱 ETag 值之分。<br>
1、强 ETag 值<br>
强 ETag 值，不论实体发生多么细微的变化都会改变其值</p>
<pre><code class="language-sh">ETag: &quot;usagi-1234&quot;
</code></pre>
<p>弱 ETag 值<br>
弱 ETag 值只用于提示资源是否相同。只有资源发生了根本改变，产生差异时才会改变 ETag 值。这时，会在字段值最开始处附加 W/。</p>
<pre><code class="language-http">ETag: W/&quot;usagi-1234&quot;
</code></pre>
<h3 id="location">Location</h3>
<p>使用首部字段 Location 可以将响应接收方引导至某个与请求 URI 位置不同的资源。</p>
<p>基本上，该字段会配合 3xx ：Redirection 的响应，提供重定向的URI。</p>
<p>几乎所有的浏览器在接收到包含首部字段 Location 的响应后，都会强制性地尝试对已提示的重定向资源的访问。</p>
<pre><code class="language-http">Location: http://www.usagidesign.jp/sample.html
</code></pre>
<h3 id="proxy-authenticate">Proxy-Authenticate</h3>
<p>首部字段 Proxy-Authenticate 会把由代理服务器所要求的认证信息发送给客户端。</p>
<p>它与客户端和服务器之间的 HTTP 访问认证的行为相似，不同之处在于其认证行为是在客户端与代理之间进行的。而客户端与服务器之间进行认证时，首部字段 WWW-Authorization 有着相同的作用。</p>
<pre><code class="language-http">Proxy-Authenticate: Basic realm=&quot;Usagidesign Auth&quot;
</code></pre>
<h3 id="retry-after">Retry-After</h3>
<p>首部字段 Retry-After 告知客户端应该在多久之后再次发送请求。主要配合状态码 503 Service Unavailable 响应，或 3xx Redirect 响应一起使用。</p>
<p>字段值可以指定为具体的日期时间（Wed, 04 Jul 2012 06：34：24GMT 等格式），也可以是创建响应后的秒数。</p>
<pre><code class="language-http">Retry-After: Wed, 21 Oct 2015 07:28:00 GMT
Retry-After: 120
</code></pre>
<h3 id="server">Server</h3>
<p>首部字段 Server 告知客户端当前服务器上安装的 HTTP 服务器应用程序的信息。不单单会标出服务器上的软件应用名称，还有可能包括版本号和安装时启用的可选项。</p>
<pre><code class="language-http">Server: Apache/2.2.17 (Unix)
Server: Apache/2.2.6 (Unix) PHP/5.2.5
</code></pre>
<h3 id="vary">Vary</h3>
<p>首部字段 Vary 可对缓存进行控制。源服务器会向代理服务器传达关于本地缓存使用方法的命令。</p>
<p>从代理服务器接收到源服务器返回包含 Vary 指定项的响应之后，若再要进行缓存，仅对请求中含有相同 Vary 指定首部字段的请求返回缓存。即使对相同资源发起请求，但由于 Vary 指定的首部字段不相同，因此必须要从源服务器重新获取资源。</p>
<pre><code class="language-http">Vary: Accept-Language
</code></pre>
<p>当代理服务器接收到带有 Vary 首部字段指定获取资源的请求时，如果使用的 Accept-Language 字段的值相同，那么就直接从缓存返回响应。反之，则需要先从源服务器端获取资源后才能作为响应返回</p>
<h3 id="www-authenticate">WWW-Authenticate</h3>
<p>首部字段 WWW-Authenticate 用于 HTTP 访问认证。它会告知客户端适用于访问请求 URI 所指定资源的认证方案（Basic 或是 Digest）和带参数提示的质询（challenge）。状态码 401 Unauthorized 响应中，肯定带有首部字段 WWW-Authenticate。</p>
<pre><code class="language-http">WWW-Authenticate: Basic realm=&quot;Usagidesign Auth&quot;
</code></pre>
<p>上述示例中，realm 字段的字符串是为了辨别请求 URI 指定资源所受到的保护策略。</p>
]]></content>
    </entry>
    <entry>
        <title type="html"><![CDATA[http-请求首部字段]]></title>
        <id>https://leecss.com/post/http-qing-qiu-shou-bu-zi-duan/</id>
        <link href="https://leecss.com/post/http-qing-qiu-shou-bu-zi-duan/">
        </link>
        <updated>2021-07-20T15:43:16.000Z</updated>
        <content type="html"><![CDATA[<h2 id="概述">概述</h2>
<p>请求首部字段是从客户端往服务器端发送请求报文中所使用的字段，用于补充请求的附加信息、客户端信息、对响应内容相关的优先级等内容。</p>
<h2 id="列表">列表</h2>
<table>
<thead>
<tr>
<th>请求首部</th>
<th>作用（请求报文专用）</th>
</tr>
</thead>
<tbody>
<tr>
<td>Accept</td>
<td>能正确接收的媒体类型：<code>application/json</code> <code>text/plain</code></td>
</tr>
<tr>
<td>Accept-Charset</td>
<td>能正确接收的字符集: <code>unicode-1-1</code></td>
</tr>
<tr>
<td>Accept-Encoding</td>
<td>能正确接收的内容编码格式列表：<code>gzip deflate</code></td>
</tr>
<tr>
<td>Accept-Language</td>
<td>能正确接收的语言列表：<code>zh-cn,zh;1=0.9,en,1=0.8</code></td>
</tr>
<tr>
<td>Authorization</td>
<td>客户端认证信息：<code>Bearer dSdSdFFlsfdjasd123</code>，一般存token用</td>
</tr>
<tr>
<td>Expect</td>
<td>指定期望条件，并告知服务器只有在满足此期望条件的情况下才能妥善地处理请求。</td>
</tr>
<tr>
<td>From</td>
<td>请求方邮箱地址</td>
</tr>
<tr>
<td>Host</td>
<td>服务器的域名，用于区分单台服务器多个域名的虚拟主机，是HTTP/1.1唯一必须包含的字段。</td>
</tr>
<tr>
<td>If-Match</td>
<td>服务器会比对 If-Match 的字段值和资源的 ETag 值，仅当两者一致时，才会执行请求</td>
</tr>
<tr>
<td>If-None-Match</td>
<td>服务器会比对 If-Match 的字段值和资源的 ETag 值，当两者不一致时，执行请求</td>
</tr>
<tr>
<td>If-Modified-Since</td>
<td>服务器只在所请求的资源在 If-Modified-Since 给定的日期时间之后对内容进行过修改的情况下才会将资源返回</td>
</tr>
<tr>
<td>If-Unmodified-Since</td>
<td>服务器只在所请求的资源在 If-Modified-Since 给定的日期时间之后对内容未进行过修改的情况下才会将资源返回</td>
</tr>
<tr>
<td>If-Range</td>
<td>该字段与Range字段配合使用，If-Range字段值中的条件得到满足时，Range 头字段才会起作用</td>
</tr>
<tr>
<td>Max-Forwards</td>
<td>限制可被代理及网关转发的次数</td>
</tr>
<tr>
<td>Proxy-Authorization</td>
<td>向代理服务器发送验证信息</td>
</tr>
<tr>
<td>Range</td>
<td>请求某个内容的一部分，配合<code>If-Range</code>使用</td>
</tr>
<tr>
<td>Referer</td>
<td>请求发起页面的原始URI</td>
</tr>
<tr>
<td>TE</td>
<td>传输编码方式</td>
</tr>
<tr>
<td>User-Agent</td>
<td>客户端信息</td>
</tr>
</tbody>
</table>
<h3 id="accept">Accept</h3>
<p>Accept 首部字段可通知服务器，用户代理能够处理的媒体类型及媒体类型的相对优先级。可使用 type/subtype 这种形式，一次指定多种媒体类型。</p>
<pre><code>文本文件
text/html, text/plain, text/css ...
application/xhtml+xml, application/xml ...

图片文件
image/jpeg, image/gif, image/png ...

视频文件
video/mpeg, video/quicktime ...

应用程序使用的二进制文件
application/octet-stream, application/zip ...
</code></pre>
<p>比如，如果浏览器不支持 PNG 图片的显示，那 Accept 就不指定image/png，而指定可处理的 image/gif 和 image/jpeg 等图片类型。<br>
若想要给显示的媒体类型增加优先级，则使用 q= 来额外表示权重值，用分号（;）进行分隔。权重值 q 的范围是 0~1（可精确到小数点后 3 位），且 1 为最大值。不指定权重 q 值时，默认权重为 q=1.0。</p>
<pre><code class="language-http">Accept:text/html,application/xhtml+xml,application/xml;q=0.9,image/webp,image/png,*/*;q=0.8
</code></pre>
<h3 id="accept-charset">Accept-Charset</h3>
<p>Accept-Charset 首部字段可用来通知服务器用户代理支持的字符集及字符集的相对优先顺序。另外，可一次性指定多种字符集。与首部字段 Accept 相同的是可用权重 q 值来表示相对优先级。</p>
<pre><code class="language-http">Accept-Charset: iso-8859-5, unicode-1-1;q=0.8
</code></pre>
<h3 id="accept-encoding">Accept-Encoding</h3>
<p>Accept-Encoding 首部字段用来告知服务器用户代理支持的内容编码及内容编码的优先级顺序。可一次性指定多种内容编码。</p>
<pre><code>gzip
由文件压缩程序 gzip（GNU zip）生成的编码格式（RFC1952），采用 Lempel-Ziv 算法（LZ77）及 32 位循环冗余校验（Cyclic Redundancy Check，通称 CRC）。

compress
由 UNIX 文件压缩程序 compress 生成的编码格式，采用 LempelZiv-Welch 算法（LZW）。

deflate
组合使用 zlib 格式（RFC1950）及由 deflate 压缩算法（RFC1951）生成的编码格式。

identity
不执行压缩或不会变化的默认编码格式
</code></pre>
<p>采用权重 q 值来表示相对优先级，这点与首部字段 Accept 相同。另外，也可使用星号（*）作为通配符，指定任意的编码格式。</p>
<pre><code class="language-http">Accept-Encoding: gzip, deflate
</code></pre>
<h3 id="accept-language">Accept-Language</h3>
<p>首部字段 Accept-Language 用来告知服务器用户代理能够处理的自然语言集（指中文或英文等），以及自然语言集的相对优先级。可一次指定多种自然语言集。<br>
和 Accept 首部字段一样，按权重值 q 来表示相对优先级。客户端在服务器有中文版资源的情况下，会请求其返回中文版对应的响应，没有中文版时，则请求返回英文版响应。</p>
<pre><code class="language-http">Accept-Language: zh-cn,zh;q=0.7,en-us,en;q=0.3
</code></pre>
<h3 id="authorization">Authorization</h3>
<p>首部字段 Authorization 是用来告知服务器，用户代理的认证信息（证书值）。通常，想要通过服务器认证的用户代理会在接收到返回的401 状态码响应后，把首部字段 Authorization 加入请求中。共用缓存在接收到含有 Authorization 首部字段的请求时的操作处理会略有差异。</p>
<pre><code class="language-http">Authorization: Basic dWVub3NlbjpwYXNzd29yZA==
</code></pre>
<h3 id="expect">Expect</h3>
<p>客户端使用首部字段 Expect 来告知服务器，期望出现的某种特定行为。</p>
<p>等待状态码 100 响应的客户端在发生请求时，需要指定 Expect:100-continue。</p>
<p>客户端可以利用该首部字段，写明所期望的扩展。虽然 HTTP/1.1 规范只定义了 100-continue（状态码 100 Continue 之意）。</p>
<pre><code class="language-http">Expect: 100-continue
</code></pre>
<p>返回100表示请求头中的期望条件可以得到满足</p>
<p>因服务器无法理解客户端的期望作出回应而发生错误时，会返回状态码 417 Expectation Failed。</p>
<h3 id="from">From</h3>
<p>首部字段 From 用来告知服务器使用用户代理的用户的电子邮件地址。通常，其使用目的就是为了显示搜索引擎等用户代理的负责人的电子邮件联系方式。使用代理时，应尽可能包含 From 首部字段（但可能会因代理不同，将电子邮件地址记录在 User-Agent 首部字段内）。</p>
<pre><code class="language-http">From: webmaster@example.org
</code></pre>
<h3 id="host">Host</h3>
<p>首部字段 Host 会告知服务器，请求的资源所处的互联网主机名和端口号。<u>Host 首部字段在 HTTP/1.1 规范内是唯一一个必须被包含在请求内的首部字段。</u></p>
<pre><code class="language-http">Host: www.hackr.jp
</code></pre>
<p>首部字段 Host 和以单台服务器分配多个域名的虚拟主机的工作机制有很密切的关联，这是首部字段 Host 必须存在的意义。</p>
<p>请求被发送至服务器时，请求中的主机名会用 IP 地址直接替换解决。但如果这时，相同的 IP 地址下部署运行着多个域名，那么服务器就会无法理解究竟是哪个域名对应的请求。因此，就需要使用首部字段 Host 来明确指出请求的主机名。若服务器未设定主机名，那直接发送一个空值即可。如下所示。</p>
<pre><code class="language-http">Host:
</code></pre>
<h3 id="if-match">If-Match</h3>
<p>形如 If-xxx 这种样式的请求首部字段，都可称为条件请求。服务器接收到附带条件的请求后，只有判断指定条件为真时，才会执行请求。</p>
<pre><code class="language-http">If-Match: &quot;123456&quot;
</code></pre>
<p>首部字段 If-Match，属附带条件之一，它会告知服务器匹配资源所用的实体标记（ETag）值。这时的服务器无法使用弱 ETag 值。</p>
<p>服务器会比对 If-Match 的字段值和资源的 ETag 值，仅当两者一致时，才会执行请求。反之，则返回状态码 412 Precondition Failed 的响应。</p>
<p>ETag 之间的比较使用的是强比较算法，即只有在每一个字节都相同的情况下，才可以认为两个文件是相同的。在 ETag 前面添加 W/ 前缀表示可以采用相对宽松的算法。</p>
<p>还可以使用星号（*）指定 If-Match 的字段值。针对这种情况，服务器将会忽略 ETag 的值，只要资源存在就处理请求。</p>
<pre><code class="language-http">If-Match: &quot;bfc13a64729c4290ef5b2c2730249c88ca92d82d&quot;
If-Match: W/&quot;67ab43&quot;, &quot;54ed21&quot;, &quot;7892dd&quot;
If-Match: *
</code></pre>
<h3 id="if-none-match">If-None-Match</h3>
<p>首部字段 If-None-Match 属于附带条件之一。它和首部字段 If-Match作用相反。用于指定 If-None-Match 字段值的实体标记（ETag）值与请求资源的 ETag 不一致时，它就告知服务器处理该请求。</p>
<p>在 GET 或 HEAD 方法中使用首部字段 If-None-Match 可获取最新的资源。因此，这与使用首部字段 If-Modified-Since 时有些类似。</p>
<pre><code class="language-http">If-None-Match: &quot;bfc13a64729c4290ef5b2c2730249c88ca92d82d&quot;
If-None-Match: W/&quot;67ab43&quot;, &quot;54ed21&quot;, &quot;7892dd&quot;
If-None-Match: *
</code></pre>
<h3 id="if-modified-since">If-Modified-Since</h3>
<p>首部字段 If-Modified-Since，属附带条件之一，它会告知服务器若 IfModified-Since 字段值早于资源的更新时间，则希望能处理该请求。而在指定 If-Modified-Since 字段值的日期时间之后，如果请求的资源都没有过更新，则返回状态码 304 Not Modified 的响应。</p>
<p>If-Modified-Since 用于确认代理或客户端拥有的本地资源的有效性。获取资源的更新日期时间，可通过确认首部字段 Last-Modified 来确定。</p>
<pre><code class="language-http">If-Modified-Since: Thu, 15 Apr 2004 00:00:00 GMT
</code></pre>
<h3 id="if-unmodified-since">If-Unmodified-Since</h3>
<p>首部字段 If-Unmodified-Since 和首部字段 If-Modified-Since 的作用相反。它的作用的是告知服务器，指定的请求资源只有在字段值内指定的日期时间之后，未发生更新的情况下，才能处理请求。如果在指定日期时间后发生了更新，则以状态码 412 Precondition Failed 作为响应返回。</p>
<pre><code class="language-http">If-Unmodified-Since: Thu, 03 Jul 2012 00:00:00 GMT
</code></pre>
<h3 id="if-range">If-Range</h3>
<p>该字段与Range字段配合使用，If-Range字段值中的条件得到满足时，Range 头字段才会起作用</p>
<p>首部字段 If-Range 属于附带条件之一。它告知服务器若指定的 If-Range 字段值（ETag 值或者时间）和请求资源的 ETag 值或时间相一致时，则作为范围请求处理。反之，则返回全体资源。</p>
<p>下面我们思考一下不使用首部字段 If-Range 发送请求的情况。服务器端的资源如果更新，那客户端持有资源中的一部分也会随之无效，当然，范围请求作为前提是无效的。这时，服务器会暂且以状态码 412Precondition Failed 作为响应返回，其目的是催促客户端再次发送请求。这样一来，与使用首部字段 If-Range 比起来，就需要花费两倍的功夫。</p>
<pre><code class="language-http">GET /index.html
If-Range: &quot;123456&quot;
Range: bytes=5001-10000
</code></pre>
<h3 id="max-forwards">Max-Forwards</h3>
<p>通过 TRACE 方法或 OPTIONS 方法，发送包含首部字段 MaxForwards 的请求时，该字段以十进制整数形式指定可经过的服务器最大数目。服务器在往下一个服务器转发请求之前，Max-Forwards 的值减 1 后重新赋值。当服务器接收到 Max-Forwards 值为 0 的请求时，则不再进行转发，而是直接返回响应。</p>
<p>使用 HTTP 协议通信时，请求可能会经过代理等多台服务器。途中，如果代理服务器由于某些原因导致请求转发失败，客户端也就等不到服务器返回的响应了。对此，我们无从可知。</p>
<p>可以灵活使用首部字段 Max-Forwards，针对以上问题产生的原因展开调查。由于当 Max-Forwards 字段值为 0 时，服务器就会立即返回响应，由此我们至少可以对以那台服务器为终点的传输路径的通信状况有所把握。</p>
<pre><code class="language-http">Max-Forwards: 10
</code></pre>
<h3 id="proxy-authorization">Proxy-Authorization</h3>
<p>接收到从代理服务器发来的认证质询时，客户端会发送包含首部字段Proxy-Authorization 的请求，以告知服务器认证所需要的信息。</p>
<p>这个行为是与客户端和服务器之间的 HTTP 访问认证相类似的，不同之处在于，认证行为发生在客户端与代理之间。客户端与服务器之间的认证，使用首部字段 Authorization 可起到相同作用。</p>
<pre><code class="language-http">Proxy-Authorization: Basic dGlwOjkpNLAGfFY5
</code></pre>
<h3 id="range">Range</h3>
<pre><code class="language-http">Range: bytes=5001-10000
</code></pre>
<p>对于只需获取部分资源的范围请求，包含首部字段 Range 即可告知服务器资源的指定范围。上面的示例表示请求获取从第 5001 字节至第10000 字节的资源。</p>
<p>接收到附带 Range 首部字段请求的服务器，会在处理请求之后返回状态码为 206 Partial Content 的响应。无法处理该范围请求时，则会返回状态码 200 OK 的响应及全部资源。</p>
<h3 id="referer">Referer</h3>
<p>首部字段 Referer 会告知服务器请求的原始资源的 URI。</p>
<p>客户端一般都会发送 Referer 首部字段给服务器。但当直接在浏览器的地址栏输入 URI，或出于安全性的考虑时，也可以不发送该首部字段。</p>
<p>因为原始资源的 URI 中的查询字符串可能含有 ID 和密码等保密信息，要是写进 Referer 转发给其他服务器，则有可能导致保密信息的泄露。</p>
<p>另外，Referer 的正确的拼写应该是 Referrer，但不知为何，大家一直沿用这个错误的拼写。</p>
<pre><code class="language-http">Referer: http://www.hackr.jp/index.htm
</code></pre>
<h3 id="te">TE</h3>
<pre><code class="language-http">TE: gzip, deflate;q=0.5
</code></pre>
<p>首部字段 TE 会告知服务器客户端能够处理响应的传输编码方式及相对优先级。它和首部字段 Accept-Encoding 的功能很相像，但是用于传输编码。</p>
<p><u>TE是用于传输编码，而Accept-Encoding用于内容编码。</u></p>
<p>首部字段 TE 除指定传输编码之外，还可以指定伴随 trailer 字段的分块传输编码的方式。应用后者时，只需把 trailers 赋值给该字段值。</p>
<pre><code class="language-http">TE: trailers
</code></pre>
<h3 id="user-agent">User-Agent</h3>
<p>User-Agent 用于传达浏览器的种类</p>
<p>首部字段 User-Agent 会将创建请求的浏览器和用户代理名称等信息传达给服务器。</p>
<p>由网络爬虫发起请求时，有可能会在字段内添加爬虫作者的电子邮件地址。此外，如果请求经过代理，那么中间也很可能被添加上代理服务器的名称。</p>
<pre><code class="language-http">User-Agent:Mozilla/5.0 (Macintosh; Intel Mac OS X 10_12_6) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/63.0.3239.84 Safari/537.36 Name
</code></pre>
]]></content>
    </entry>
    <entry>
        <title type="html"><![CDATA[http-通用首部字段Cache-Control]]></title>
        <id>https://leecss.com/post/http-tong-yong-shou-bu-zi-duan-cache-control/</id>
        <link href="https://leecss.com/post/http-tong-yong-shou-bu-zi-duan-cache-control/">
        </link>
        <updated>2021-07-19T15:35:46.000Z</updated>
        <content type="html"><![CDATA[<h1 id="http-通用首部字段cache-control">http-通用首部字段Cache-Control</h1>
<h2 id="概述">概述</h2>
<p>通过指定首部字段 Cache-Control 的指令，就能操作缓存的工作机制。</p>
<h2 id="书写格式">书写格式</h2>
<p>指令的参数是可选的，多个指令之间通过“,”分隔。首部字段 CacheControl 的指令可用于请求及响应时。</p>
<pre><code>Cache-Control: private, max-age=0, no-cache
</code></pre>
<h2 id="分类">分类</h2>
<h3 id="缓存请求指令">缓存请求指令</h3>
<table>
<thead>
<tr>
<th>指令</th>
<th>参数</th>
<th>说明</th>
</tr>
</thead>
<tbody>
<tr>
<td>no-cache</td>
<td>无</td>
<td>不使用缓存，缓存服务器必须把客户端请求转发给源服务器，在与源服务器进行新鲜度再验证之前，不能提供给客户端使用。</td>
</tr>
<tr>
<td>no-store</td>
<td>无</td>
<td>真正的不使用缓存，任何地方都不缓存请求或响应的任何内容。</td>
</tr>
<tr>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td>max-age=60</td>
<td>必需</td>
<td>资源可缓存最大时间(相对时间：秒)，即过期时间、保质期。</td>
</tr>
<tr>
<td>max-stale=60</td>
<td>可省略</td>
<td>缓存资源，只要仍处于 max-stale指定的时间(秒)内，即使过期也照常接收。缓存总时长为max-age和max-stale叠加。</td>
</tr>
<tr>
<td>min-fresh=60</td>
<td>必需</td>
<td>期望在指定时间内(未来60秒内)的响应保持新鲜</td>
</tr>
<tr>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td>no-transform</td>
<td>无</td>
<td>代理不可更改媒体类型</td>
</tr>
<tr>
<td>only-if-cached</td>
<td>无</td>
<td>只从缓存获取资源，若有则返回，若无则504</td>
</tr>
</tbody>
</table>
<h3 id="缓存响应指令">缓存响应指令</h3>
<table>
<thead>
<tr>
<th>指令</th>
<th>参数</th>
<th>说明</th>
</tr>
</thead>
<tbody>
<tr>
<td>no-cache</td>
<td>无</td>
<td>缓存前必须先确认其有效性</td>
</tr>
<tr>
<td>no-store</td>
<td>无</td>
<td>不缓存请求或响应的任何内容</td>
</tr>
<tr>
<td>public</td>
<td>无</td>
<td>客户端、代理服务器都可利用缓存</td>
</tr>
<tr>
<td>private</td>
<td>无</td>
<td>仅发起请求的客户端可利用缓存</td>
</tr>
<tr>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td>max-age=60</td>
<td>必需</td>
<td>针对源服务器，资源可缓存最大时间</td>
</tr>
<tr>
<td>s-maxage=60</td>
<td>必需</td>
<td>针对代理缓存服务器，资源可缓存最大时间</td>
</tr>
<tr>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td>must-revalidate</td>
<td>无</td>
<td>可缓存但必须再向源服务器进行确认</td>
</tr>
<tr>
<td>proxy-revalidate</td>
<td>无</td>
<td>代理缓存服务器对缓存的响应有效性再进行确认</td>
</tr>
<tr>
<td>no-transform</td>
<td>无</td>
<td>代理不可更改媒体类型</td>
</tr>
</tbody>
</table>
<h2 id="详解">详解</h2>
<h3 id="no-cache">no-cache</h3>
<p>使用 no-cache 指令的目的是为了防止从缓存中返回过期的资源。</p>
<p><strong>客户端</strong>发送的请求中如果包含 no-cache 指令，则表示客户端将不会接收缓存过的响应。于是，“中间”的缓存服务器必须把客户端请求转发给源服务器。</p>
<p>如果<strong>服务器</strong>返回的响应中包含 no-cache 指令，那么缓存服务器不能对资源进行缓存。源服务器以后也将不再对缓存服务器请求中提出的资源有效性进行确认，且禁止其对响应资源进行缓存操作。</p>
<pre><code>Cache-Control: no-cache
</code></pre>
<p>如果可以使用缓存，则304；不可以使用，则200。</p>
<h3 id="max-age">max-age</h3>
<p>当<strong>客户端</strong>发送的请求中包含 max-age 指令时，如果判定缓存资源的缓存时间数值比指定时间的数值更小，那么客户端就接收缓存的资源。<br>
另外，<u>当指定 max-age 值为 0，那么缓存服务器通常需要将请求转发给源服务器</u>。</p>
<p>当<strong>服务器</strong>返回的响应中包含 max-age 指令时，缓存服务器将不对资源的有效性再作确认，而 max-age 数值代表资源保存为缓存的最长时间。</p>
<pre><code>Cache-Control: max-age=604800（单位：秒）
</code></pre>
<p><strong>问题</strong></p>
<p>有一个问题 catch-control 是客户端缓存，当max-age 之内，服务端更新了数据，客户端是不能知道的。</p>
<p>这个问题，前端的一种常用的解决方案是，将打包的js文件名加入一段哈希码，当打包内容不变时，哈希码就不变。这样子，当内容不变时，请求的url 也就不变，当内容变了请求的url 也变了。这样就达到了更新缓存的目的。</p>
<h3 id="min-fresh">min-fresh</h3>
<p>min-fresh 指令要求缓存服务器返回至少还未过指定时间的缓存资源。</p>
<p>比如，当指定 min-fresh 为 60 秒后，过了 60 秒的资源都无法作为响应返回了。</p>
<pre><code>Cache-Control: min-fresh=60（单位：秒）
</code></pre>
<h3 id="max-stale">max-stale</h3>
<p>使用 max-stale 可指示缓存资源，即使过期也照常接收。</p>
<p>如果指令中指定了具体数值，那么即使过期，只要仍处于 max-stale指定的时间内，仍旧会被客户端接收。</p>
<p><u>如果指令未指定参数值，那么无论经过多久，客户端都会接收响应；</u></p>
<pre><code>Cache-Control: max-stale=3600（单位：秒）
</code></pre>
<h3 id="only-if-cached">only-if-cached</h3>
<p>使用 only-if-cached 指令表示客户端仅在缓存服务器本地缓存目标资源的情况下才会要求其返回。换言之，该指令要求缓存服务器不重新加载响应，也不会再次确认资源有效性。若发生请求缓存服务器的本地缓存无响应，则返回状态码 504 Gateway Timeout。</p>
<pre><code>Cache-Control: only-if-cached
</code></pre>
<h3 id="must-revalidate">must-revalidate</h3>
<p>使用 must-revalidate 指令，代理会向源服务器再次验证即将返回的响应缓存目前是否仍然有效。</p>
<p>若代理无法连通源服务器再次获取有效资源的话，缓存必须给客户端一条 504（Gateway Timeout）状态码。</p>
<p>另外，使用 must-revalidate 指令会忽略请求的 max-stale 指令（即使已经在首部使用了 max-stale，也不会再有效果）。</p>
<pre><code>Cache-Control: must-revalidate
</code></pre>
<h3 id="proxy-revalidate">proxy-revalidate</h3>
<p>proxy-revalidate 指令要求所有的缓存服务器在接收到客户端带有该指令的请求返回响应之前，必须再次验证缓存的有效性。</p>
<pre><code>Cache-Control: proxy-revalidate
</code></pre>
<h3 id="no-transform">no-transform</h3>
<p>有时为了提高性能，缓存或代理会有压缩图片等类似操作</p>
<p>使用 no-transform 指令规定无论是在请求还是响应中，缓存都不能改变实体主体的媒体类型。<br>
这样做可防止缓存或代理压缩图片等类似操作</p>
<h2 id="浏览器缓存机制">浏览器缓存机制</h2>
<p>以下总结自<a href="https://blog.csdn.net/kkdelta/article/details/100576096">网络</a>，以后确认具体过程。</p>
<p>1、当前缓存是否过期？2、服务器中的文件是否可用？</p>
<p><strong>第一步：判断当前缓存是否过期</strong></p>
<p>浏览器请求server.js文件，</p>
<p>假如文件还在缓存有效期内，则直接使用缓存，不会重新发起请求。</p>
<p>假如文件缓存过期，则重新发起请求。</p>
<p><strong>第二步：判断服务器中的文件是否可用</strong></p>
<p>服务器判断请求的server.js文件是否在缓存有效期内，若有效，则返回响应头304，浏览器直接使用过期缓存；</p>
<p>若文件已过期，服务器判断文件是否有改动，无改动，则返回响应头304，浏览器直接使用过期缓存；</p>
<p>若文件有改动，则返回200，并返回新文件。</p>
<h2 id="cache-control使用图解">cache-control使用图解</h2>
<figure data-type="image" tabindex="1"><img src="https://leecss.com/post-images/1626740943823.webp" alt="" loading="lazy"></figure>
<h2 id="目前仍有的疑问">目前仍有的疑问</h2>
<p>1、缓存总时长为max-age和max-stale叠加，取值为相加值，还是最大值？</p>
<p>2、must-revalidate和proxy-revalidate区别？</p>
]]></content>
    </entry>
    <entry>
        <title type="html"><![CDATA[http-通用首部字段]]></title>
        <id>https://leecss.com/post/http-tong-yong-shou-bu-zi-duan/</id>
        <link href="https://leecss.com/post/http-tong-yong-shou-bu-zi-duan/">
        </link>
        <updated>2021-07-18T23:08:49.000Z</updated>
        <content type="html"><![CDATA[<h2 id="概述">概述</h2>
<p>通用首部字段是指，请求报文和响应报文双方都会使用的首部。</p>
<h2 id="列表">列表</h2>
<table>
<thead>
<tr>
<th>通用首部</th>
<th>作用（请求报文和响应报文都可能使用）</th>
</tr>
</thead>
<tbody>
<tr>
<td>Cache-Control</td>
<td>控制缓存的行为</td>
</tr>
<tr>
<td>Connection</td>
<td>管理持久连接：决定当前的事务完成后，是否会关闭网络连接</td>
</tr>
<tr>
<td>Date</td>
<td>创建报文时间</td>
</tr>
<tr>
<td>Pragma</td>
<td>兼容HTTP/1.0字段：只用于请求报文，客户端要求中间服务器不返回缓存的资源</td>
</tr>
<tr>
<td>Trailer</td>
<td>允许发送方在分块发送的消息后面添加额外的元信息，常用于分块传输编码中。</td>
</tr>
<tr>
<td>Transfer-Encoding</td>
<td>规定了传输报文主体时采用的编码方式：<code>chunked</code>分块传输</td>
</tr>
<tr>
<td>Upgrade</td>
<td>要求客户端使用的升级协议，需配合<code>Connection: Upgrade</code>一起使用：<code>websocket</code></td>
</tr>
<tr>
<td>Via</td>
<td>代理服务器相关信息，每经过一个代理服务器就会添加相关信息，用逗号分割</td>
</tr>
<tr>
<td>Warning</td>
<td>缓存相关问题的警告</td>
</tr>
</tbody>
</table>
<h3 id="cache-control">Cache-Control</h3>
<p>可缓存性</p>
<p><code>public</code>（客户端、代理服务器都可利用缓存）</p>
<p><code>private</code>（发起请求的浏览器才可以缓存,代理服务器不可用缓存）</p>
<p><code>no-cache</code>（本地可以用使用缓存，但需要服务器验证后才能使用）</p>
<p><code>no-store</code>（不做任何缓存）</p>
<p>到期</p>
<p><code>max-age=200</code>（服务器缓存到期时间， 秒）</p>
<p><code>s-maxage=200</code> (代理服务器缓存的到期时间， 秒)</p>
<h3 id="connection">Connection</h3>
<p>管理持久连接：决定当前的事务完成后，是否会关闭网络连接。</p>
<p>Http协议1.1之后默认都是keep-alive（持久连接），1.0则是close（非持久连接）。</p>
<pre><code>Connection: keep-alive
Connection: close
</code></pre>
<h3 id="date">Date</h3>
<p>表明创建 HTTP 报文的日期和时间。</p>
<pre><code>Date: Tue, 03 Jul 2012 04:40:59 GMT
</code></pre>
<h3 id="pragma">Pragma</h3>
<p>Pragma 是 HTTP/1.1 之前版本的历史遗留字段，仅作为与 HTTP/1.0的向后兼容而定义。</p>
<p>规范定义的形式唯一，如下所示。</p>
<pre><code>Pragma: no-cache
</code></pre>
<p>该首部字段属于通用首部字段，但只用在客户端发送的请求中。客户端会要求所有的中间服务器不返回缓存的资源。</p>
<p>所有的中间服务器如果都能以 HTTP/1.1 为基准，那直接采用 CacheControl: no-cache 指定缓存的处理方式是最为理想的。但要整体掌握全部中间服务器使用的 HTTP 协议版本却是不现实的。因此，发送的请求会同时含有下面两个首部字段。</p>
<pre><code>Cache-Control: no-cache
Pragma: no-cache
</code></pre>
<h3 id="trailer">Trailer</h3>
<p>首部字段 Trailer 会事先说明在报文主体后记录了哪些首部字段。该首部字段可应用在 HTTP/1.1 版本分块传输编码时。</p>
<pre><code>HTTP/1.1 200 OK
Date: Tue, 03 Jul 2012 04:40:56 GMT
Content-Type: text/html
...
Transfer-Encoding: chunked
Trailer: Expires
...(报文主体)...
0
Expires: Tue, 28 Sep 2004 23:59:59 GMT
</code></pre>
<p>以上用例中，指定首部字段 Trailer 的值为 Expires，在报文主体之后（分块长度 0 之后）出现了首部字段 Expires。</p>
<h3 id="transfer-encoding">Transfer-Encoding</h3>
<p>规定了传输报文主体时采用的编码方式。</p>
<p>HTTP/1.1 的传输编码方式仅对分块传输编码有效。</p>
<pre><code>HTTP/1.1 200 OK
Date: Tue, 03 Jul 2012 04:40:56 GMT
Cache-Control: public, max-age=604800
Content-Type: text/javascript; charset=utf-8
Expires: Tue, 10 Jul 2012 04:40:56 GMT
X-Frame-Options: DENY
X-XSS-Protection: 1; mode=block
Content-Encoding: gzip
Transfer-Encoding: chunked
Connection: keep-alive
cf0 ←16进制(10进制为3312)
...3312字节分块数据...
392 ←16进制(10进制为914)
...914字节分块数据...
0
</code></pre>
<h3 id="upgrade">Upgrade</h3>
<p>首部字段 Upgrade 用于检测 HTTP 协议及其他协议是否可使用更高的版本进行通信，其参数值可以用来指定一个完全不同的通信协议。</p>
<pre><code>GET /index.htm HTTP/1.1
Upgrade: TLS/1.0
Connection: Upgrade
------------------&gt;
&lt;------------------
HTTP/1.1 101 Switching Protocols
Upgrade: TLS/1.0, HTTP/1.1
Connection: Upgrade
</code></pre>
<p>上图用例中，首部字段 Upgrade 指定的值为 TLS/1.0。请注意此处两个字段首部字段的对应关系，Connection 的值被指定为 Upgrade。Upgrade 首部字段产生作用的 Upgrade 对象仅限于客户端和邻接服务器之间。因此，使用首部字段 Upgrade 时，还需要额外指定Connection:Upgrade。</p>
<p>对于附有首部字段 Upgrade 的请求，服务器可用 101 Switching Protocols 状态码作为响应返回。</p>
<h3 id="via">Via</h3>
<p>使用首部字段 Via 是为了追踪客户端与服务器之间的请求和响应报文的传输路径。</p>
<p>报文经过代理或网关时，会先在首部字段 Via 中附加该服务器的信息，然后再进行转发。</p>
<p>首部字段 Via 不仅用于追踪报文的转发，还可避免请求回环的发生。所以必须在经过代理时附加该首部字段内容。</p>
<pre><code>客户端: 
GET / HTTP/1.1

代理服务器A: 
GET / HTTP/1.1
Via: 1.0 gw.hackr.jp (Squid/3.1)

代理服务器B:
GET / HTTP/1.1
Via: 1.0 gw.hackr.jp (Squid/3.1), 1.1 a1.example.net(Squid/2.7)

源服务器
</code></pre>
<p>上图用例中，在经过代理服务器 A 时，Via 首部附加了“1.0 gw.hackr.jp (Squid/3.1)”这样的字符串值。行头的 1.0 是指接收请求的97服务器上应用的 HTTP 协议版本。接下来经过代理服务器 B 时亦是如此，在 Via 首部附加服务器信息，也可增加 1 个新的 Via 首部写入服务器信息。</p>
<p>Via 首部是为了追踪传输路径，所以经常会和 TRACE 方法一起使用。比如，代理服务器接收到由 TRACE 方法发送过来的请求（其中Max-Forwards: 0）时，代理服务器就不能再转发该请求了。这种情况下，代理服务器会将自身的信息附加到 Via 首部后，返回该请求的响应。</p>
<h3 id="warning">Warning</h3>
<p>用于告知用户一些与缓存相关的问题的警告。</p>
<p>Warning 首部的格式如下。最后的日期时间部分可省略。</p>
<pre><code>Warning: [警告码][警告的主机:端口号]“[警告内容]”([日期时间])
Warning: 112 gw.hacker.jp:8080  &quot;cache down&quot; &quot; Wed, 21 Oct 2015 07:28:00 GMT&quot;
</code></pre>
<p><strong>警告码表</strong></p>
<table>
<thead>
<tr>
<th>警告码</th>
<th>警告内容</th>
<th>说明</th>
</tr>
</thead>
<tbody>
<tr>
<td>110</td>
<td>Response is stale</td>
<td>响应已过期：由缓存服务器提供的响应已过期（设置的失效时间已过）。</td>
</tr>
<tr>
<td>111</td>
<td>Revalidation failed</td>
<td>再验证失败：由于无法访问服务器，响应验证失败。</td>
</tr>
<tr>
<td>112</td>
<td>Disconnection operation</td>
<td>断开连接操作：缓存服务器断开连接。</td>
</tr>
<tr>
<td>113</td>
<td>Heuristic expiration</td>
<td>试探性过期：响应的使用期超过24小时（有效缓存的设定时间大于24小时的情况下）</td>
</tr>
<tr>
<td>199</td>
<td>Miscellaneous warning</td>
<td>杂项警告：任意的警告内容</td>
</tr>
<tr>
<td>214</td>
<td>Transformation applied</td>
<td>使用了转换：由代理服务器添加，如果它对返回的展现内容进行了任何转换，比如改变了内容编码、媒体类型等。</td>
</tr>
<tr>
<td>299</td>
<td>Miscellaneous persistent warning</td>
<td>持久杂项警告：任意的警告内容</td>
</tr>
</tbody>
</table>
]]></content>
    </entry>
</feed>